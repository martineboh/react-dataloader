!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.ReactDataloader=e(require("react")):t.ReactDataloader=e(t.React)}(this,function(__WEBPACK_EXTERNAL_MODULE_2__){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=n(4),i=(n(44),n(45)),o=n(46),s=n(1),a=n(47),u=n(30),c=n(34);t.exports={FilteredDatasource:o,Datasource:r,BasicDatasource:i,Collection:s,ObjectTest:a,DSManager:u,uuid:c}},function(t,e,n){"use strict";var r=n(2),i=n(3),o=r.createClass({displayName:"Collection",propTypes:{data:r.PropTypes.array.isRequired},getDefaultProps:function(){return{data:[]}},render:function(){var t,e=this;return t=this.props.data?Object.keys(this.props.data[0]||{}):[],r.createElement("section",null,r.createElement("table",{className:"item-list"},r.createElement(a,{keys:t}),r.createElement("tbody",null,i.isArray(this.props.data)&&this.props.data.map(function(t,n){return r.createElement(s,{object:t,key:t.id||n,onClick:e.props.handleSelect})}))))}}),s=r.createClass({displayName:"TableRow",propTypes:{object:r.PropTypes.object},render:function(){var t=this,e=this.props.onClick&&this.props.onClick.bind(null,this.props.object.id)||function(){};return r.createElement("tr",{onClick:e},Object.keys(this.props.object).map(function(e){return r.createElement("td",{key:e},JSON.stringify(t.props.object[e]))}))}}),a=r.createClass({displayName:"TableHeader",propTypes:{keys:r.PropTypes.array},render:function(){return r.createElement("thead",null,this.props.keys.map(function(t,e){return r.createElement("th",{key:e},t)}))}});t.exports=o},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE_2__},function(t,e,n){var r,i;(function(){function n(t){function e(e,n,r,i,o,s){for(;o>=0&&s>o;o+=t){var a=i?i[o]:o;r=n(r,e[a],a,e)}return r}return function(n,r,i,o){r=S(r,o,4);var s=!D(n)&&x.keys(n),a=(s||n).length,u=t>0?0:a-1;return arguments.length<3&&(i=n[s?s[u]:u],u+=t),e(n,r,i,s,u,a)}}function o(t){return function(e,n,r){n=I(n,r);for(var i=A(e),o=t>0?0:i-1;o>=0&&i>o;o+=t)if(n(e[o],o,e))return o;return-1}}function s(t,e,n){return function(r,i,o){var s=0,a=A(r);if("number"==typeof o)t>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(n&&o&&a)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=e(d.call(r,s,a),x.isNaN),o>=0?o+s:-1;for(o=t>0?s:a-1;o>=0&&a>o;o+=t)if(r[o]===i)return o;return-1}}function a(t,e){var n=q.length,r=t.constructor,i=x.isFunction(r)&&r.prototype||l,o="constructor";for(x.has(t,o)&&!x.contains(e,o)&&e.push(o);n--;)o=q[n],o in t&&t[o]!==i[o]&&!x.contains(e,o)&&e.push(o)}var u=this,c=u._,h=Array.prototype,l=Object.prototype,f=Function.prototype,p=h.push,d=h.slice,y=l.toString,v=l.hasOwnProperty,g=Array.isArray,m=Object.keys,_=f.bind,w=Object.create,b=function(){},x=function(t){return t instanceof x?t:this instanceof x?void(this._wrapped=t):new x(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=x),e._=x,x.VERSION="1.8.3";var S=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},I=function(t,e,n){return null==t?x.identity:x.isFunction(t)?S(t,e,n):x.isObject(t)?x.matcher(t):x.property(t)};x.iteratee=function(t,e){return I(t,e,1/0)};var k=function(t,e){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var o=arguments[i],s=t(o),a=s.length,u=0;a>u;u++){var c=s[u];e&&void 0!==n[c]||(n[c]=o[c])}return n}},E=function(t){if(!x.isObject(t))return{};if(w)return w(t);b.prototype=t;var e=new b;return b.prototype=null,e},j=function(t){return function(e){return null==e?void 0:e[t]}},O=Math.pow(2,53)-1,A=j("length"),D=function(t){var e=A(t);return"number"==typeof e&&e>=0&&O>=e};x.each=x.forEach=function(t,e,n){e=S(e,n);var r,i;if(D(t))for(r=0,i=t.length;i>r;r++)e(t[r],r,t);else{var o=x.keys(t);for(r=0,i=o.length;i>r;r++)e(t[o[r]],o[r],t)}return t},x.map=x.collect=function(t,e,n){e=I(e,n);for(var r=!D(t)&&x.keys(t),i=(r||t).length,o=Array(i),s=0;i>s;s++){var a=r?r[s]:s;o[s]=e(t[a],a,t)}return o},x.reduce=x.foldl=x.inject=n(1),x.reduceRight=x.foldr=n(-1),x.find=x.detect=function(t,e,n){var r;return r=D(t)?x.findIndex(t,e,n):x.findKey(t,e,n),void 0!==r&&-1!==r?t[r]:void 0},x.filter=x.select=function(t,e,n){var r=[];return e=I(e,n),x.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},x.reject=function(t,e,n){return x.filter(t,x.negate(I(e)),n)},x.every=x.all=function(t,e,n){e=I(e,n);for(var r=!D(t)&&x.keys(t),i=(r||t).length,o=0;i>o;o++){var s=r?r[o]:o;if(!e(t[s],s,t))return!1}return!0},x.some=x.any=function(t,e,n){e=I(e,n);for(var r=!D(t)&&x.keys(t),i=(r||t).length,o=0;i>o;o++){var s=r?r[o]:o;if(e(t[s],s,t))return!0}return!1},x.contains=x.includes=x.include=function(t,e,n,r){return D(t)||(t=x.values(t)),("number"!=typeof n||r)&&(n=0),x.indexOf(t,e,n)>=0},x.invoke=function(t,e){var n=d.call(arguments,2),r=x.isFunction(e);return x.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},x.pluck=function(t,e){return x.map(t,x.property(e))},x.where=function(t,e){return x.filter(t,x.matcher(e))},x.findWhere=function(t,e){return x.find(t,x.matcher(e))},x.max=function(t,e,n){var r,i,o=-(1/0),s=-(1/0);if(null==e&&null!=t){t=D(t)?t:x.values(t);for(var a=0,u=t.length;u>a;a++)r=t[a],r>o&&(o=r)}else e=I(e,n),x.each(t,function(t,n,r){i=e(t,n,r),(i>s||i===-(1/0)&&o===-(1/0))&&(o=t,s=i)});return o},x.min=function(t,e,n){var r,i,o=1/0,s=1/0;if(null==e&&null!=t){t=D(t)?t:x.values(t);for(var a=0,u=t.length;u>a;a++)r=t[a],o>r&&(o=r)}else e=I(e,n),x.each(t,function(t,n,r){i=e(t,n,r),(s>i||i===1/0&&o===1/0)&&(o=t,s=i)});return o},x.shuffle=function(t){for(var e,n=D(t)?t:x.values(t),r=n.length,i=Array(r),o=0;r>o;o++)e=x.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},x.sample=function(t,e,n){return null==e||n?(D(t)||(t=x.values(t)),t[x.random(t.length-1)]):x.shuffle(t).slice(0,Math.max(0,e))},x.sortBy=function(t,e,n){return e=I(e,n),x.pluck(x.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var P=function(t){return function(e,n,r){var i={};return n=I(n,r),x.each(e,function(r,o){var s=n(r,o,e);t(i,r,s)}),i}};x.groupBy=P(function(t,e,n){x.has(t,n)?t[n].push(e):t[n]=[e]}),x.indexBy=P(function(t,e,n){t[n]=e}),x.countBy=P(function(t,e,n){x.has(t,n)?t[n]++:t[n]=1}),x.toArray=function(t){return t?x.isArray(t)?d.call(t):D(t)?x.map(t,x.identity):x.values(t):[]},x.size=function(t){return null==t?0:D(t)?t.length:x.keys(t).length},x.partition=function(t,e,n){e=I(e,n);var r=[],i=[];return x.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},x.first=x.head=x.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:x.initial(t,t.length-e)},x.initial=function(t,e,n){return d.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},x.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:x.rest(t,Math.max(0,t.length-e))},x.rest=x.tail=x.drop=function(t,e,n){return d.call(t,null==e||n?1:e)},x.compact=function(t){return x.filter(t,x.identity)};var T=function(t,e,n,r){for(var i=[],o=0,s=r||0,a=A(t);a>s;s++){var u=t[s];if(D(u)&&(x.isArray(u)||x.isArguments(u))){e||(u=T(u,e,n));var c=0,h=u.length;for(i.length+=h;h>c;)i[o++]=u[c++]}else n||(i[o++]=u)}return i};x.flatten=function(t,e){return T(t,e,!1)},x.without=function(t){return x.difference(t,d.call(arguments,1))},x.uniq=x.unique=function(t,e,n,r){x.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=I(n,r));for(var i=[],o=[],s=0,a=A(t);a>s;s++){var u=t[s],c=n?n(u,s,t):u;e?(s&&o===c||i.push(u),o=c):n?x.contains(o,c)||(o.push(c),i.push(u)):x.contains(i,u)||i.push(u)}return i},x.union=function(){return x.uniq(T(arguments,!0,!0))},x.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=A(t);i>r;r++){var o=t[r];if(!x.contains(e,o)){for(var s=1;n>s&&x.contains(arguments[s],o);s++);s===n&&e.push(o)}}return e},x.difference=function(t){var e=T(arguments,!0,!0,1);return x.filter(t,function(t){return!x.contains(e,t)})},x.zip=function(){return x.unzip(arguments)},x.unzip=function(t){for(var e=t&&x.max(t,A).length||0,n=Array(e),r=0;e>r;r++)n[r]=x.pluck(t,r);return n},x.object=function(t,e){for(var n={},r=0,i=A(t);i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},x.findIndex=o(1),x.findLastIndex=o(-1),x.sortedIndex=function(t,e,n,r){n=I(n,r,1);for(var i=n(e),o=0,s=A(t);s>o;){var a=Math.floor((o+s)/2);n(t[a])<i?o=a+1:s=a}return o},x.indexOf=s(1,x.findIndex,x.sortedIndex),x.lastIndexOf=s(-1,x.findLastIndex),x.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;r>o;o++,t+=n)i[o]=t;return i};var C=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=E(t.prototype),s=t.apply(o,i);return x.isObject(s)?s:o};x.bind=function(t,e){if(_&&t.bind===_)return _.apply(t,d.call(arguments,1));if(!x.isFunction(t))throw new TypeError("Bind must be called on a function");var n=d.call(arguments,2),r=function(){return C(t,r,e,this,n.concat(d.call(arguments)))};return r},x.partial=function(t){var e=d.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),s=0;i>s;s++)o[s]=e[s]===x?arguments[r++]:e[s];for(;r<arguments.length;)o.push(arguments[r++]);return C(t,n,this,this,o)};return n},x.bindAll=function(t){var e,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(e=1;r>e;e++)n=arguments[e],t[n]=x.bind(t[n],t);return t},x.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return x.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},x.delay=function(t,e){var n=d.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},x.defer=x.partial(x.delay,x,1),x.throttle=function(t,e,n){var r,i,o,s=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:x.now(),s=null,o=t.apply(r,i),s||(r=i=null)};return function(){var c=x.now();a||n.leading!==!1||(a=c);var h=e-(c-a);return r=this,i=arguments,0>=h||h>e?(s&&(clearTimeout(s),s=null),a=c,o=t.apply(r,i),s||(r=i=null)):s||n.trailing===!1||(s=setTimeout(u,h)),o}},x.debounce=function(t,e,n){var r,i,o,s,a,u=function(){var c=x.now()-s;e>c&&c>=0?r=setTimeout(u,e-c):(r=null,n||(a=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,s=x.now();var c=n&&!r;return r||(r=setTimeout(u,e)),c&&(a=t.apply(o,i),o=i=null),a}},x.wrap=function(t,e){return x.partial(e,t)},x.negate=function(t){return function(){return!t.apply(this,arguments)}},x.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},x.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},x.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},x.once=x.partial(x.before,2);var z=!{toString:null}.propertyIsEnumerable("toString"),q=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];x.keys=function(t){if(!x.isObject(t))return[];if(m)return m(t);var e=[];for(var n in t)x.has(t,n)&&e.push(n);return z&&a(t,e),e},x.allKeys=function(t){if(!x.isObject(t))return[];var e=[];for(var n in t)e.push(n);return z&&a(t,e),e},x.values=function(t){for(var e=x.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},x.mapObject=function(t,e,n){e=I(e,n);for(var r,i=x.keys(t),o=i.length,s={},a=0;o>a;a++)r=i[a],s[r]=e(t[r],r,t);return s},x.pairs=function(t){for(var e=x.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},x.invert=function(t){for(var e={},n=x.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},x.functions=x.methods=function(t){var e=[];for(var n in t)x.isFunction(t[n])&&e.push(n);return e.sort()},x.extend=k(x.allKeys),x.extendOwn=x.assign=k(x.keys),x.findKey=function(t,e,n){e=I(e,n);for(var r,i=x.keys(t),o=0,s=i.length;s>o;o++)if(r=i[o],e(t[r],r,t))return r},x.pick=function(t,e,n){var r,i,o={},s=t;if(null==s)return o;x.isFunction(e)?(i=x.allKeys(s),r=S(e,n)):(i=T(arguments,!1,!1,1),r=function(t,e,n){return e in n},s=Object(s));for(var a=0,u=i.length;u>a;a++){var c=i[a],h=s[c];r(h,c,s)&&(o[c]=h)}return o},x.omit=function(t,e,n){if(x.isFunction(e))e=x.negate(e);else{var r=x.map(T(arguments,!1,!1,1),String);e=function(t,e){return!x.contains(r,e)}}return x.pick(t,e,n)},x.defaults=k(x.allKeys,!0),x.create=function(t,e){var n=E(t);return e&&x.extendOwn(n,e),n},x.clone=function(t){return x.isObject(t)?x.isArray(t)?t.slice():x.extend({},t):t},x.tap=function(t,e){return e(t),t},x.isMatch=function(t,e){var n=x.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;r>o;o++){var s=n[o];if(e[s]!==i[s]||!(s in i))return!1}return!0};var M=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof x&&(t=t._wrapped),e instanceof x&&(e=e._wrapped);var i=y.call(t);if(i!==y.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(x.isFunction(s)&&s instanceof s&&x.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),o){if(u=t.length,u!==e.length)return!1;for(;u--;)if(!M(t[u],e[u],n,r))return!1}else{var c,h=x.keys(t);if(u=h.length,x.keys(e).length!==u)return!1;for(;u--;)if(c=h[u],!x.has(e,c)||!M(t[c],e[c],n,r))return!1}return n.pop(),r.pop(),!0};x.isEqual=function(t,e){return M(t,e)},x.isEmpty=function(t){return null==t?!0:D(t)&&(x.isArray(t)||x.isString(t)||x.isArguments(t))?0===t.length:0===x.keys(t).length},x.isElement=function(t){return!(!t||1!==t.nodeType)},x.isArray=g||function(t){return"[object Array]"===y.call(t)},x.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},x.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){x["is"+t]=function(e){return y.call(e)==="[object "+t+"]"}}),x.isArguments(arguments)||(x.isArguments=function(t){return x.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(x.isFunction=function(t){return"function"==typeof t||!1}),x.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},x.isNaN=function(t){return x.isNumber(t)&&t!==+t},x.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===y.call(t)},x.isNull=function(t){return null===t},x.isUndefined=function(t){return void 0===t},x.has=function(t,e){return null!=t&&v.call(t,e)},x.noConflict=function(){return u._=c,this},x.identity=function(t){return t},x.constant=function(t){return function(){return t}},x.noop=function(){},x.property=j,x.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},x.matcher=x.matches=function(t){return t=x.extendOwn({},t),function(e){return x.isMatch(e,t)}},x.times=function(t,e,n){var r=Array(Math.max(0,t));e=S(e,n,1);for(var i=0;t>i;i++)r[i]=e(i);return r},x.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},x.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=x.invert(R),N=function(t){var e=function(e){return t[e]},n="(?:"+x.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};x.escape=N(R),x.unescape=N(L),x.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),x.isFunction(r)?r.call(t):r};var V=0;x.uniqueId=function(t){var e=++V+"";return t?t+e:e},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},$=/\\|'|\r|\n|\u2028|\u2029/g,B=function(t){return"\\"+U[t]};x.template=function(t,e,n){!e&&n&&(e=n),e=x.defaults({},e,x.templateSettings);var r=RegExp([(e.escape||F).source,(e.interpolate||F).source,(e.evaluate||F).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,s,a){return o+=t.slice(i,a).replace($,B),i=a+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(e.variable||"obj","_",o)}catch(a){throw a.source=o,a}var u=function(t){return s.call(this,t,x)},c=e.variable||"obj";return u.source="function("+c+"){\n"+o+"}",u},x.chain=function(t){var e=x(t);return e._chain=!0,e};var W=function(t,e){return t._chain?x(e).chain():e};x.mixin=function(t){x.each(x.functions(t),function(e){var n=x[e]=t[e];x.prototype[e]=function(){var t=[this._wrapped];return p.apply(t,arguments),W(this,n.apply(x,t))}})},x.mixin(x),x.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=h[t];x.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],W(this,n)}}),x.each(["concat","join","slice"],function(t){var e=h[t];x.prototype[t]=function(){return W(this,e.apply(this._wrapped,arguments))}}),x.prototype.value=function(){return this._wrapped},x.prototype.valueOf=x.prototype.toJSON=x.prototype.value,x.prototype.toString=function(){return""+this._wrapped},r=[],i=function(){return x}.apply(e,r),!(void 0!==i&&(t.exports=i))}).call(this)},function(t,e,n){"use strict";var r=n(2),i=n(5),o=n(28),s=n(29),a=(n(3),r.createClass({displayName:"Datasource",propTypes:{config:r.PropTypes.shape({name:r.PropTypes.string,basePath:r.PropTypes.string,endpoint:r.PropTypes.string,storeType:r.PropTypes.string.isRequired,idAttr:r.PropTypes.string,autoPopulate:r.PropTypes.bool}),data:r.PropTypes.array},getDefaultProps:function(){return{autoPopulate:!0,config:{idAttr:"id",storeType:"unique"}}},mixins:[i.ListenerMixin,o,s],_reloadCollection:function(t,e){var n=t.objectId,r=this.props,i=r.onData,o=r.autoPopulate,s=e.dataSource;if(s){var a=n?s.get(n):s.getCollection();a?(i&&i(a),this.setState({data:a})):o&&this._populate(t,e)}},componentWillReceiveProps:function(t){var e=this.props.config&&this.props.config.name,n=t.config&&t.config.name;n!==e?(this.stopListeningToAll(),this._prepareDatasource(t.config)):t.objectId!==this.props.objectId&&this._reloadCollection(t,this.state)},componentWillUpdate:function(t,e){this.state.dataSource!=e.dataSource&&this.props.autoPopulate&&this._populate(t,e)},_populate:function(t,e){var n=e.dataSource,r=t.objectId?{id:t.objectId}:null;n.listenables.populate(r)},componentDidMount:function(){this._prepareDatasource(this.props.config),this._reloadCollection(this.props,this.state)}}));t.exports=a},function(t,e,n){t.exports=n(6)},function(t,e,n){e.ActionMethods=n(8),e.ListenerMethods=n(9),e.PublisherMethods=n(21),e.StoreMethods=n(22),e.createAction=n(23),e.createStore=n(17),e.connect=n(24),e.connectFilter=n(25),e.ListenerMixin=n(26),e.listenTo=n(7),e.listenToMany=n(27);var r=n(16).staticJoinCreator;e.joinTrailing=e.all=r("last"),e.joinLeading=r("first"),e.joinStrict=r("strict"),e.joinConcat=r("all");var i=n(10);e.EventEmitter=i.EventEmitter,e.Promise=i.Promise,e.createActions=function(t){var n={};for(var r in t)if(t.hasOwnProperty(r)){var o=t[r],s=i.isObject(o)?r:o;n[s]=e.createAction(o)}return n},e.setEventEmitter=function(t){var r=n(10);e.EventEmitter=r.EventEmitter=t},e.setPromise=function(t){var r=n(10);e.Promise=r.Promise=t},e.setPromiseFactory=function(t){var e=n(10);e.createPromise=t},e.nextTick=function(t){var e=n(10);e.nextTick=t},e.__keep=n(18),Function.prototype.bind||console.error("Function.prototype.bind not available. ES5 shim required. https://github.com/spoike/refluxjs#es5")},function(t,e,n){var r=n(6);t.exports=function(t,e,n){return{componentDidMount:function(){for(var i in r.ListenerMethods)if(this[i]!==r.ListenerMethods[i]){if(this[i])throw"Can't have other property '"+i+"' when using Reflux.listenTo!";this[i]=r.ListenerMethods[i]}this.listenTo(t,e,n)},componentWillUnmount:r.ListenerMethods.stopListeningToAll}}},function(t,e){t.exports={}},function(t,e,n){var r=n(10),i=n(16).instanceJoinCreator,o=function(t){for(var e,n=0,r={};n<(t.children||[]).length;++n)e=t.children[n],t[e]&&(r[e]=t[e]);return r},s=function(t){var e={};for(var n in t){var i=t[n],a=o(i),u=s(a);e[n]=i;for(var c in u){var h=u[c];e[n+r.capitalize(c)]=h}}return e};t.exports={hasListener:function(t){for(var e,n,r,i=0;i<(this.subscriptions||[]).length;++i)for(r=[].concat(this.subscriptions[i].listenable),e=0;e<r.length;e++)if(n=r[e],n===t||n.hasListener&&n.hasListener(t))return!0;return!1},listenToMany:function(t){var e=s(t);for(var n in e){var i=r.callbackName(n),o=this[i]?i:this[n]?n:void 0;o&&this.listenTo(e[n],o,this[i+"Default"]||this[o+"Default"]||o)}},validateListening:function(t){return t===this?"Listener is not able to listen to itself":r.isFunction(t.listen)?t.hasListener&&t.hasListener(this)?"Listener cannot listen to this listenable because of circular loop":void 0:t+" is missing a listen method"},listenTo:function(t,e,n){var i,o,s,a=this.subscriptions=this.subscriptions||[];return r.throwIf(this.validateListening(t)),this.fetchInitialState(t,n),i=t.listen(this[e]||e,this),o=function(){var t=a.indexOf(s);r.throwIf(-1===t,"Tried to remove listen already gone from subscriptions list!"),a.splice(t,1),i()},s={stop:o,listenable:t},a.push(s),s},stopListeningTo:function(t){for(var e,n=0,i=this.subscriptions||[];n<i.length;n++)if(e=i[n],e.listenable===t)return e.stop(),r.throwIf(-1!==i.indexOf(e),"Failed to remove listen from subscriptions list!"),!0;return!1},stopListeningToAll:function(){for(var t,e=this.subscriptions||[];t=e.length;)e[0].stop(),r.throwIf(e.length!==t-1,"Failed to remove listen from subscriptions list!")},fetchInitialState:function(t,e){e=e&&this[e]||e;var n=this;if(r.isFunction(e)&&r.isFunction(t.getInitialState)){var i=t.getInitialState();i&&r.isFunction(i.then)?i.then(function(){e.apply(n,arguments)}):e.call(this,i)}},joinTrailing:i("last"),joinLeading:i("first"),joinConcat:i("all"),joinStrict:i("strict")}},function(t,e,n){var r=e.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t};e.extend=function(t){if(!r(t))return t;for(var e,n,i=1,o=arguments.length;o>i;i++){e=arguments[i];for(n in e)if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,s)}else t[n]=e[n]}return t},e.isFunction=function(t){return"function"==typeof t},e.EventEmitter=n(11),e.nextTick=function(t){setTimeout(t,0)},e.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},e.callbackName=function(t){return"on"+e.capitalize(t)},e.object=function(t,e){for(var n={},r=0;r<t.length;r++)n[t[r]]=e[r];return n},e.Promise=n(12),e.createPromise=function(t){return new e.Promise(t)},e.isArguments=function(t){return"object"==typeof t&&"callee"in t&&"number"==typeof t.length},e.throwIf=function(t,e){if(t)throw Error(e||t)}},function(t,e){"use strict";function n(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function r(){}r.prototype._events=void 0,r.prototype.listeners=function(t){if(!this._events||!this._events[t])return[];if(this._events[t].fn)return[this._events[t].fn];for(var e=0,n=this._events[t].length,r=new Array(n);n>e;e++)r[e]=this._events[t][e].fn;return r},r.prototype.emit=function(t,e,n,r,i,o){if(!this._events||!this._events[t])return!1;var s,a,u=this._events[t],c=arguments.length;if("function"==typeof u.fn){switch(u.once&&this.removeListener(t,u.fn,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,r),!0;case 5:return u.fn.call(u.context,e,n,r,i),!0;case 6:return u.fn.call(u.context,e,n,r,i,o),!0}for(a=1,s=new Array(c-1);c>a;a++)s[a-1]=arguments[a];u.fn.apply(u.context,s)}else{var h,l=u.length;for(a=0;l>a;a++)switch(u[a].once&&this.removeListener(t,u[a].fn,!0),c){case 1:u[a].fn.call(u[a].context);break;case 2:u[a].fn.call(u[a].context,e);break;case 3:u[a].fn.call(u[a].context,e,n);break;default:if(!s)for(h=1,s=new Array(c-1);c>h;h++)s[h-1]=arguments[h];u[a].fn.apply(u[a].context,s)}}return!0},r.prototype.on=function(t,e,r){var i=new n(e,r||this);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],i]:this._events[t].push(i):this._events[t]=i,this},r.prototype.once=function(t,e,r){var i=new n(e,r||this,!0);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],i]:this._events[t].push(i):this._events[t]=i,this},r.prototype.removeListener=function(t,e,n){if(!this._events||!this._events[t])return this;var r=this._events[t],i=[];if(e&&(r.fn&&(r.fn!==e||n&&!r.once)&&i.push(r),!r.fn))for(var o=0,s=r.length;s>o;o++)(r[o].fn!==e||n&&!r[o].once)&&i.push(r[o]);return i.length?this._events[t]=1===i.length?i[0]:i:delete this._events[t],this},r.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[t]:this._events={},this):this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.EventEmitter=r,r.EventEmitter2=r,r.EventEmitter3=r,t.exports=r},function(t,e,n){var r;(function(i,o){/*! Native Promise Only
	    v0.7.8-a (c) Kyle Simpson
	    MIT License: http://getify.mit-license.org
	*/
!function(i,o,s){o[i]=o[i]||s(),"undefined"!=typeof t&&t.exports?t.exports=o[i]:!0&&n(15)&&(r=function(){return o[i]}.call(e,n,e,t),!(void 0!==r&&(t.exports=r)))}("Promise","undefined"!=typeof i?i:this,function(){"use strict";function t(t,e){p.add(t,e),f||(f=y(p.drain))}function e(t){var e,n=typeof t;return null==t||"object"!=n&&"function"!=n||(e=t.then),"function"==typeof e?e:!1}function n(){for(var t=0;t<this.chain.length;t++)r(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function r(t,n,r){var i,o;try{n===!1?r.reject(t.msg):(i=n===!0?t.msg:n.call(void 0,t.msg),i===r.promise?r.reject(TypeError("Promise-chain cycle")):(o=e(i))?o.call(i,r.resolve,r.reject):r.resolve(i))}catch(s){r.reject(s)}}function i(r){var o,a,c=this;if(!c.triggered){c.triggered=!0,c.def&&(c=c.def);try{(o=e(r))?(a=new u(c),o.call(r,function(){i.apply(a,arguments)},function(){s.apply(a,arguments)})):(c.msg=r,c.state=1,c.chain.length>0&&t(n,c))}catch(h){s.call(a||new u(c),h)}}}function s(e){var r=this;r.triggered||(r.triggered=!0,r.def&&(r=r.def),r.msg=e,r.state=2,r.chain.length>0&&t(n,r))}function a(t,e,n,r){for(var i=0;i<e.length;i++)!function(i){t.resolve(e[i]).then(function(t){n(i,t)},r)}(i)}function u(t){this.def=t,this.triggered=!1}function c(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function h(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new c(this);this.then=function(e,i){var o={success:"function"==typeof e?e:!0,failure:"function"==typeof i?i:!1};return o.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");o.resolve=t,o.reject=e}),r.chain.push(o),0!==r.state&&t(n,r),o.promise},this["catch"]=function(t){return this.then(void 0,t)};try{e.call(void 0,function(t){i.call(r,t)},function(t){s.call(r,t)})}catch(o){s.call(r,o)}}var l,f,p,d=Object.prototype.toString,y="undefined"!=typeof o?function(t){return o(t)}:setTimeout;try{Object.defineProperty({},"x",{}),l=function(t,e,n,r){return Object.defineProperty(t,e,{value:n,writable:!0,configurable:r!==!1})}}catch(v){l=function(t,e,n){return t[e]=n,t}}p=function(){function t(t,e){this.fn=t,this.self=e,this.next=void 0}var e,n,r;return{add:function(i,o){r=new t(i,o),n?n.next=r:e=r,n=r,r=void 0},drain:function(){var t=e;for(e=n=f=void 0;t;)t.fn.call(t.self),t=t.next}}}();var g=l({},"constructor",h,!1);return h.prototype=g,l(g,"__NPO__",0,!1),l(h,"resolve",function(t){var e=this;return t&&"object"==typeof t&&1===t.__NPO__?t:new e(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");e(t)})}),l(h,"reject",function(t){return new this(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");n(t)})}),l(h,"all",function(t){var e=this;return"[object Array]"!=d.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");var i=t.length,o=Array(i),s=0;a(e,t,function(t,e){o[t]=e,++s===i&&n(o)},r)})}),l(h,"race",function(t){var e=this;return"[object Array]"!=d.call(t)?e.reject(TypeError("Not an array")):new e(function(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");a(e,t,function(t,e){n(e)},r)})}),h})}).call(e,function(){return this}(),n(13).setImmediate)},function(t,e,n){(function(t,r){function i(t,e){this._id=t,this._clearFn=e}var o=n(14).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,u={},c=0;e.setTimeout=function(){return new i(s.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new i(s.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=c++,r=arguments.length<2?!1:a.call(arguments,1);return u[n]=!0,o(function(){u[n]&&(r?t.apply(null,r):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof r?r:function(t){delete u[t]}}).call(e,n(13).setImmediate,n(13).clearImmediate)},function(t,e){function n(){c=!1,s.length?u=s.concat(u):h=-1,u.length&&r()}function r(){if(!c){var t=setTimeout(n);c=!0;for(var e=u.length;e;){for(s=u,u=[];++h<e;)s[h].run();h=-1,e=u.length}s=null,c=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function o(){}var s,a=t.exports={},u=[],c=!1,h=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new i(t,e)),1!==u.length||c||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,n){function r(t,e,n){return function(){var r,i=n.subscriptions,o=i?i.indexOf(t):-1;for(u.throwIf(-1===o,"Tried to remove join already gone from subscriptions list!"),r=0;r<e.length;r++)e[r]();i.splice(o,1)}}function i(t){t.listenablesEmitted=new Array(t.numberOfListenables),t.args=new Array(t.numberOfListenables)}function o(t,e){return function(){var n=a.call(arguments);if(e.listenablesEmitted[t])switch(e.strategy){case"strict":throw new Error("Strict join failed because listener triggered twice.");case"last":e.args[t]=n;break;case"all":e.args[t].push(n)}else e.listenablesEmitted[t]=!0,e.args[t]="all"===e.strategy?[n]:n;s(e)}}function s(t){for(var e=0;e<t.numberOfListenables;e++)if(!t.listenablesEmitted[e])return;t.callback.apply(t.listener,t.args),i(t)}var a=Array.prototype.slice,u=n(10),c=n(17),h={strict:"joinStrict",first:"joinLeading",last:"joinTrailing",all:"joinConcat"};e.staticJoinCreator=function(t){return function(){var e=a.call(arguments);return c({init:function(){this[h[t]].apply(this,e.concat("triggerAsync"))}})}},e.instanceJoinCreator=function(t){return function(){u.throwIf(arguments.length<3,"Cannot create a join with less than 2 listenables!");var e,n,s=a.call(arguments),c=s.pop(),h=s.length,l={numberOfListenables:h,callback:this[c]||c,listener:this,strategy:t},f=[];for(e=0;h>e;e++)u.throwIf(this.validateListening(s[e]));for(e=0;h>e;e++)f.push(s[e].listen(o(e,l),this));return i(l),n={listenable:s},n.stop=r(n,f,this),this.subscriptions=(this.subscriptions||[]).concat(n),n}}},function(t,e,n){var r=n(10),i=n(6),o=n(18),s=n(19),a={preEmit:1,shouldEmit:1},u=n(20);t.exports=function(t){function e(){var e,n=0;if(this.subscriptions=[],this.emitter=new r.EventEmitter,this.eventLabel="change",u(this,t),this.init&&r.isFunction(this.init)&&this.init(),this.listenables)for(e=[].concat(this.listenables);n<e.length;n++)this.listenToMany(e[n])}t=t||{};for(var n in i.StoreMethods)if(!a[n]&&(i.PublisherMethods[n]||i.ListenerMethods[n]))throw new Error("Cannot override API method "+n+" in Reflux.StoreMethods. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.");for(var c in t)if(!a[c]&&(i.PublisherMethods[c]||i.ListenerMethods[c]))throw new Error("Cannot override API method "+c+" in store creation. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.");t=s(t),r.extend(e.prototype,i.ListenerMethods,i.PublisherMethods,i.StoreMethods,t);var h=new e;return o.createdStores.push(h),h}},function(t,e){e.createdStores=[],e.createdActions=[],e.reset=function(){for(;e.createdStores.length;)e.createdStores.pop();for(;e.createdActions.length;)e.createdActions.pop()}},function(t,e,n){var r=n(10);t.exports=function(t){var e={init:[],preEmit:[],shouldEmit:[]},n=function i(t){var n={};return t.mixins&&t.mixins.forEach(function(t){r.extend(n,i(t))}),r.extend(n,t),Object.keys(e).forEach(function(n){t.hasOwnProperty(n)&&e[n].push(t[n])}),n}(t);return e.init.length>1&&(n.init=function(){var t=arguments;e.init.forEach(function(e){e.apply(this,t)},this)}),e.preEmit.length>1&&(n.preEmit=function(){return e.preEmit.reduce(function(t,e){var n=e.apply(this,t);return void 0===n?t:[n]}.bind(this),arguments)}),e.shouldEmit.length>1&&(n.shouldEmit=function(){var t=arguments;return!e.shouldEmit.some(function(e){return!e.apply(this,t)},this)}),Object.keys(e).forEach(function(t){1===e[t].length&&(n[t]=e[t][0])}),n}},function(t,e){t.exports=function(t,e){for(var n in e)if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var r=Object.getOwnPropertyDescriptor(e,n);if(!r.value||"function"!=typeof r.value||!e.hasOwnProperty(n))continue;t[n]=e[n].bind(t)}else{var i=e[n];if("function"!=typeof i||!e.hasOwnProperty(n))continue;t[n]=i.bind(t)}return t}},function(t,e,n){var r=n(10);t.exports={preEmit:function(){},shouldEmit:function(){return!0},listen:function(t,e){e=e||this;var n=function(n){i||t.apply(e,n)},r=this,i=!1;return this.emitter.addListener(this.eventLabel,n),function(){i=!0,r.emitter.removeListener(r.eventLabel,n)}},promise:function(t){var e=this,n=this.children.indexOf("completed")>=0&&this.children.indexOf("failed")>=0;if(!n)throw new Error('Publisher must have "completed" and "failed" child publishers');t.then(function(t){return e.completed(t)},function(t){return e.failed(t)})},listenAndPromise:function(t,e){var n=this;e=e||this,this.willCallPromise=(this.willCallPromise||0)+1;var r=this.listen(function(){if(!t)throw new Error("Expected a function returning a promise but got "+t);var r=arguments,i=t.apply(e,r);return n.promise.call(n,i)},e);return function(){n.willCallPromise--,r.call(n)}},trigger:function(){var t=arguments,e=this.preEmit.apply(this,t);t=void 0===e?t:r.isArguments(e)?e:[].concat(e),this.shouldEmit.apply(this,t)&&this.emitter.emit(this.eventLabel,t)},triggerAsync:function(){var t=arguments,e=this;r.nextTick(function(){e.trigger.apply(e,t)})},triggerPromise:function(){var t=this,e=arguments,n=this.children.indexOf("completed")>=0&&this.children.indexOf("failed")>=0,i=r.createPromise(function(i,o){if(t.willCallPromise)return void r.nextTick(function(){var n=t.promise;t.promise=function(e){return e.then(i,o),t.promise=n,t.promise.apply(t,arguments)},t.trigger.apply(t,e)});if(n)var s=t.completed.listen(function(t){s(),a(),i(t)}),a=t.failed.listen(function(t){s(),a(),o(t)});t.triggerAsync.apply(t,e),n||i()});return i}}},function(t,e){t.exports={}},function(t,e,n){var r=n(10),i=n(6),o=n(18),s={preEmit:1,shouldEmit:1},a=function(t){t=t||{},r.isObject(t)||(t={actionName:t});for(var e in i.ActionMethods)if(!s[e]&&i.PublisherMethods[e])throw new Error("Cannot override API method "+e+" in Reflux.ActionMethods. Use another method name or override it on Reflux.PublisherMethods instead.");for(var n in t)if(!s[n]&&i.PublisherMethods[n])throw new Error("Cannot override API method "+n+" in action creation. Use another method name or override it on Reflux.PublisherMethods instead.");t.children=t.children||[],t.asyncResult&&(t.children=t.children.concat(["completed","failed"]));for(var u=0,c={};u<t.children.length;u++){var h=t.children[u];c[h]=a(h)}var l=r.extend({eventLabel:"action",emitter:new r.EventEmitter,_isAction:!0},i.PublisherMethods,i.ActionMethods,t),f=function(){return f[f.sync?"trigger":"triggerPromise"].apply(f,arguments)};return r.extend(f,c,l),o.createdActions.push(f),f};t.exports=a},function(t,e,n){var r=n(6),i=n(10);t.exports=function(t,e){return{getInitialState:function(){return i.isFunction(t.getInitialState)?void 0===e?t.getInitialState():i.object([e],[t.getInitialState()]):{}},componentDidMount:function(){i.extend(this,r.ListenerMethods);var n=this,o=void 0===e?this.setState:function(t){("undefined"==typeof n.isMounted||n.isMounted()===!0)&&n.setState(i.object([e],[t]))};this.listenTo(t,o)},componentWillUnmount:r.ListenerMixin.componentWillUnmount}}},function(t,e,n){var r=n(6),i=n(10);t.exports=function(t,e,n){return n=i.isFunction(e)?e:n,{getInitialState:function(){if(i.isFunction(t.getInitialState)){if(i.isFunction(e))return n.call(this,t.getInitialState());var r=n.call(this,t.getInitialState());return r?i.object([e],[r]):{}}return{}},componentDidMount:function(){i.extend(this,r.ListenerMethods);var o=this,s=function(t){if(i.isFunction(e))o.setState(n.call(o,t));else{var r=n.call(o,t);o.setState(i.object([e],[r]))}};this.listenTo(t,s)},componentWillUnmount:r.ListenerMixin.componentWillUnmount}}},function(t,e,n){var r=n(10),i=n(9);t.exports=r.extend({componentWillUnmount:i.stopListeningToAll},i)},function(t,e,n){var r=n(6);t.exports=function(t){return{componentDidMount:function(){for(var e in r.ListenerMethods)if(this[e]!==r.ListenerMethods[e]){if(this[e])throw"Can't have other property '"+e+"' when using Reflux.listenToMany!";this[e]=r.ListenerMethods[e]}this.listenToMany(t)},componentWillUnmount:r.ListenerMethods.stopListeningToAll}}},function(t,e,n){"use strict";var r=n(2),i=n(3),o={_buildProps:function(){var t=i.clone(this.props);return delete t.children,delete t.className,delete t.wrapper,delete t.tag,delete t.config,t},_cloneWithProps:function(t){var e=r.Children.map(this.props.children,function(e){return e?r.cloneElement(e,t):null},this.context);return e},_warn:function(t){console.warn(this.constructor.displayName,t)}};t.exports=o},function(t,e,n){"use strict";var r=n(2),i=n(3),o=n(30);t.exports={getInitialState:function(){return{data:null,dataSource:null,firstLoadComplete:!1,loading:!0}},_buildDataProps:function(){var t=this._buildProps(),e=this.state,n=e.data,r=e.dataSource,o=e.loading,s=e.firstLoadComplete,a={};return this.state.dataSource&&(a=this.state.dataSource&&this.state.dataSource.listenables),i.extend(t,{data:n,actions:a,dataSource:r,firstLoadComplete:s,loading:o})},_prepareDatasource:function(t){var e=o.getStore(t);this.listenTo(e,this.onStoreChange),this.setState({dataSource:e})},_onViewRegistered:function(){var t=this.state.dataSource,e=this.props,n=e.tag,r=(e.autoPopulate,t.getCollection(n));i.isEmpty(r)&&this._repopulate(this.props,this.state)},onStoreChange:function(t,e){"viewRegistered"===t&&e===this.props.tag&&this._onViewRegistered(),this._reloadCollection(this.props,this.state)},render:function(){var t=this._cloneWithProps(this._buildDataProps()),e=this.props.wrapper||"div";return r.createElement(e,{className:this.props.className},t)}}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){console.error(""+this.name+" error",t,e)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(5),a=n(35),u=n(36),c=n(37),h={shared:n(31),unique:n(40)},l={"default":n(42),dependent:n(43)},f=function(){function t(){r(this,t),this.generatedStores={},this.headers={},this.synchronizer=u,this.client=c,this.urlBuilders=l,this.onError=i}return o(t,[{key:"implode",value:function(){this.constructor()}},{key:"_memoizeStore",value:function(t){return this.generatedStores[t.name]||(this.generatedStores[t.name]=t),this.generatedStores[t.name]}},{key:"_memoizeClient",value:function(t){return this.generatedClients[t.name]||(this.generatedClients[t.name]=t),this.generatedClients[t.name]}},{key:"_getStore",value:function(t){return this.generatedStores[t]}},{key:"setHeaders",value:function(t){console.warn("Deprecated Method, use setDefaultHeaders"),this.setDefaultHeaders(t)}},{key:"setDefaultHeaders",value:function(t){this.headers=t}},{key:"getHeaders",value:function(){return this.headers}},{key:"registerBuilder",value:function(t,e){this.urlBuilders[t]=e}},{key:"setSynchronizer",value:function(t,e){this.generatedStores[""+t+"Synchronizer"]=e}},{key:"getSynchronizer",value:function(t){return this.generatedStores[""+t+"Synchronizer"]}},{key:"setErrorHandler",value:function(t){this.onError=t}},{key:"on",value:function(t,e,n){var r={storeType:"shared",name:t,builder:"procore"},i={storeType:"shared",name:"dispatcher"},o=this.getStore(r),s=this.getStore(i);s.listenTo(o,function(t,r){e===t&&n(r)})}},{key:"getStore",value:function(t){var e=t.name,n=t.storeType,r=this._getStore(e);return r?r:(this.headers!=={}&&(t.headers=this.getHeaders.bind(this)),this.onError&&(t.onError=this.onError),this[n||"unique"](t))}},{key:"shared",value:function(t){var e=t.name,n=t.builder,r=new h.shared(t);r.listenables=a(e);var i=s.createStore(r),o=new this.urlBuilders[n||"default"](t),u=new this.client(o,t),c=this.synchronizer(t,i,u);return this._memoizeStore(c),this._memoizeStore(i),i}},{key:"unique",value:function(t){var e=t.name,n=t.builder;e=""+e+Date.now();var r=new h.shared(t);r.listenables=a();var i=s.createStore(r),o=new this.urlBuilders[n||"default"](t),u=new this.client(o,t);this.synchronizer(t,i,u);return i}}]),t}();t.exports=window.DataStoreManager=new f},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){var e=t.name,n=t.idAttr,r=(t.fk,d.getResource(e));return{name:e,collection:r,dynamicViews:{},firstLoadComplete:!1,loading:!0,init:function(){},resetChanges:function(){var t=this,e=this.collection.getChanges();e.forEach(function(e){var n=e.obj;t.setObject(n)})},flushChanges:function(){this.collection.flushChanges()},populate:function(){this.loading=!0,this.trigger("loading",this.loading)},onPopulateSuccess:function(){this.loading=!1,this.firstLoadComplete=!0,this.trigger("loading",this.loading)},getLoadingStatus:function(){return{loading:this.loading,firstLoadComplete:this.firstLoadComplete}},add:function(t){var e=void 0===arguments[1]?!0:arguments[1],r=this.getDatabaseEntity(t);r?(console.warn("ProcoreReact: Trying to add an already existing element. Syncing instead"),this.trigger("add",t,e)):(e||t[n]||(t[n]="temp"+f.v4()),this.collection.insert(t),this.trigger("add",t,e))},setCollection:function(t){var e=this;l.map(t,function(t){var n=e.getDatabaseEntity(t);n?e.collection.update(l.extend(n,t)):e.collection.insert(t)}),this.flushChanges(),this.trigger("setCollection",this.getCollection())},setObject:function(t){var e=this.getDatabaseEntity(t);e?this.update(t,!1):this.add(t,!1),this.flushChanges()},destroy:function(t){var e=void 0===arguments[1]?!0:arguments[1],r=t;"object"==typeof t&&(r=t[n]),this.collection.remove(this.get(r)),this.trigger("destroy",t,e)},destroyAll:function(){var t=void 0===arguments[0]?!0:arguments[0];this.collection.removeDataOnly(),this.trigger("destroyAll",this.getCollection(),t)},update:function(t){var e=void 0===arguments[1]?!0:arguments[1],n=this.getDatabaseEntity(t);if(n){var r=l.extend({},n,t);this.collection.update(r),this.trigger("update",r,e)}else console.warn("ProcoreReact: Trying to update an inexisting element.")},getEntityQuery:function(t){var e={};return t.$loki?e.$loki=t.$loki:t[n]?e[n]=t[n]:e=null,e},getDatabaseEntity:function(t){var e=this.getEntityQuery(t);return e?this.collection.findOne(e):null},get:function(t){var e={};return e[n]=t,this.getDatabaseEntity(e)},find:function(t){return this.collection.find(t)},getCollection:function(t){var e=null;if(t){var n=this.collection.getDynamicView(t);e=n?n.data():null}else e=this.find();return e},filter:function(t,e){this.dynamicViews[t]||(this.dynamicViews[t]={filters:{},sortBy:{},search:""}),this.collection.removeDynamicView(t);var n=this.dynamicViews[t];l.extend(n.filters,e),this.registerView(t,n)},search:function(t,e){this.dynamicViews[t]||(this.dynamicViews[t]={filters:{},sortBy:{},search:""}),this.collection.removeDynamicView(t);var n=this.dynamicViews[t];n.search=e,this.registerView(t,n)},sort:function(t,e){this.dynamicViews[t]||(this.dynamicViews[t]={filters:{},sortBy:{},search:""}),this.collection.removeDynamicView(t);var n=this.dynamicViews[t];n.sortBy=e,this.registerView(t,n)},resetView:function(t,e){this.collection.removeDynamicView(t),e!==!1&&this.registerView(t)},registerView:function(t,e){this.collection.removeDynamicView(t);var n=this.collection.addDynamicView(t);if(!e)return this.trigger("viewRegistered",t);var r=e.filters,i=e.sortBy,a=e.search;i&&n.applySimpleSort(i.attribute,i.isDescending),i&&n.applySort(o(i)),r&&u(n,r),a&&n.applyWhere(s(a)),this.trigger("viewRegistered",t)}}}function o(t){return function(e,n){var r=e[t.attribute],i=n[t.attribute];return r="string"==typeof r?r.toLowerCase():r,i="string"==typeof i?i.toLowerCase():i,t.isDescending?i>r?1:-1:r>i?1:-1}}function s(t){return function(e){var n=!1;return Object.keys(e).forEach(function(r){n||(n=-1!==JSON.stringify(e[r]).toLowerCase().indexOf(t.toLowerCase()))}),n}}function a(t,e){var n=String(e).toLowerCase();return function(r){return void 0===e?!r[t]:-1!==String(r[t]).toLowerCase().indexOf(n)}}function u(t,e){Object.keys(e).forEach(function(n){var r=null;switch(e[n]){case null:break;default:r=a(n,e[n])}r&&t.applyWhere(r)})}var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=n(32),l=n(3),f=n(34),p=function(){function t(){r(this,t),this.dataSource=null,this.resources={}}return c(t,[{key:"getDS",value:function(){return this.dataSource?this.dataSource:(this.dataSource=new h,this.dataSource)}},{key:"getResource",value:function(t){var e=this.resources;if(e[t])return e[t];var n=this.getDS().addCollection(t,{disableChangesApi:!1});return e[t]=n,n}}]),t}(),d=new p;t.exports=i},function(t,e,n){var r,i,o;(function(s){!function(n,s){i=[],r=s,o="function"==typeof r?r.apply(e,i):r,!(void 0!==o&&(t.exports=o))}(this,function(){return function(){"use strict";function t(t,e,n){return t===e?n?!0:!1:void 0===t?!0:void 0===e?!1:null===t?!0:null===e?!1:e>t}function e(t,e,n){return t===e?n?!0:!1:void 0===t?!1:void 0===e?!0:null===t?!1:null===e?!0:t>e}function r(n,r,i){return n===r?0:i?t(n,r)?1:-1:e(n,r)?1:-1}function i(t,e){return Array.isArray(t)?function(e){return-1!==t.indexOf(e)}:"string"==typeof t?function(e){return-1!==t.indexOf(e)}:t&&"object"==typeof t?function(e){return t.hasOwnProperty(e)}:void 0}function o(t,e){var n,r=e||"parse-stringify";return"parse-stringify"===r&&(n=JSON.parse(JSON.stringify(t))),n}function a(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}function u(){}function c(t,e){this.filename=t||"loki.db",this.collections=[],this.databaseVersion=1.1,this.engineVersion=1.1,this.autosave=!1,this.autosaveInterval=5e3,this.autosaveHandle=null,this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,this.events={init:[],flushChanges:[],close:[],changes:[],warning:[]};var n=function(){return"undefined"==typeof window?"NODEJS":"undefined"!=typeof s&&s.window?"NODEJS":"undefined"!=typeof document?-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")?"CORDOVA":"BROWSER":"CORDOVA"};e&&e.hasOwnProperty("env")?this.ENV=e.env:this.ENV=n(),"undefined"===this.ENV&&(this.ENV="NODEJS"),this.configureOptions(e,!0),this.on("init",this.clearChanges)}function h(){this.fs=n(33)}function l(){}function f(t,e,n,r){return this.collection=t,this.searchIsChained=!e&&!n,this.filteredrows=[],this.filterInitialized=!1,"undefined"!=typeof e&&null!==e?this.find(e,r):"undefined"!=typeof n&&null!==n?this.where(n):this}function p(t,e,n){this.collection=t,this.name=e,this.persistent=!1,"undefined"!=typeof n&&(this.persistent=n),this.resultset=new f(t),this.resultdata=[],this.resultsdirty=!1,this.cachedresultset=null,this.filterPipeline=[],this.sortFunction=null,this.sortCriteria=null,this.sortDirty=!1,this.events={rebuild:[]}}function d(t,e){function n(t,e,n){l.changes.push({name:t,operation:e,obj:JSON.parse(JSON.stringify(n))})}function r(){l.changes=[]}function i(t){t&&(t.meta||(t.meta={}),t.meta.created=(new Date).getTime(),t.meta.revision=0)}function o(t){t&&(t.meta.updated=(new Date).getTime(),t.meta.revision+=1)}function s(t){n(l.name,"I",t)}function a(t){n(l.name,"U",t)}function u(t){i(t),s(t)}function c(t){o(t),a(t)}function h(){d=l.disableChangesApi?i:u,y=l.disableChangesApi?o:c}this.name=t,this.data=[],this.idIndex=[],this.binaryIndices={},this.constraints={unique:{},exact:{}},this.objType=t,this.dirty=!0,this.cachedIndex=null,this.cachedBinaryIndex=null,this.cachedData=null;var l=this;e=e||{},e.hasOwnProperty("unique")&&(Array.isArray(e.unique)||(e.unique=[e.unique]),e.unique.forEach(function(t){l.constraints.unique[t]=new k(t)})),e.hasOwnProperty("exact")&&e.exact.forEach(function(t){l.constraints.exact[t]=new E(t)}),this.transactional=e.hasOwnProperty("transactional")?e.transactional:!1,this.cloneObjects=e.hasOwnProperty("clone")?e.clone:!1,this.asyncListeners=e.hasOwnProperty("asyncListeners")?e.asyncListeners:!1,this.disableChangesApi=e.hasOwnProperty("disableChangesApi")?e.disableChangesApi:!0,this.maxId=0,this.DynamicViews=[],this.events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],"delete":[],warning:[]},this.changes=[],this.ensureId();var f=[];if(e&&e.indices)if("[object Array]"===Object.prototype.toString.call(e.indices))f=e.indices;else{if("string"!=typeof e.indices)throw new TypeError("Indices needs to be a string or an array of strings");f=[e.indices]}for(var p=0;p<f.length;p++)this.ensureIndex(f[p]);this.getChanges=function(){return l.changes},this.flushChanges=r;var d,y;h(),this.setChangesApi=function(t){l.disableChangesApi=!t,h()},this.on("insert",function(t){d(t)}),this.on("update",function(t){y(t)}),this.on("delete",function(t){l.disableChangesApi||n(l.name,"R",t)}),this.on("warning",console.warn),r()}function y(t){return-1!==t.indexOf(".")}function v(t){return parseFloat(t,10)}function g(t,e){return t+e}function m(t,e){return t-e}function _(t){return t.reduce(g,0)/t.length}function w(t){var e=_(t),n=t.map(function(t){var n=t-e,r=n*n;return r}),r=_(n),i=Math.sqrt(r);return i}function b(t,e,n){if(n===!1)return t[e];for(var r=e.split("."),i=t;r.length>0;)i=i[r.shift()];return i}function x(t,e,n){for(var r,i,o=0,s=t.length;s>o;){if(i=(o+s)/2|0,r=n.apply(null,[e,t[i]]),0===r)return{found:!0,index:i};0>r?s=i:o=i+1}return{found:!1,index:s}}function S(t){return function(e,n){return x(e,n,t)}}function I(){}function k(t){this.field=t,this.keyMap={},this.lokiMap={}}function E(t){this.index={},this.field=t}function j(t){this.field=t}var O={copyProperties:function(t,e){var n;for(n in t)e[n]=t[n]}},A={$eq:function(t,e){return t===e},$gt:function(t,n){return e(t,n)},$gte:function(t,n){return e(t,n,!0)},$lt:function(e,n){return t(e,n)},$lte:function(e,n){return t(e,n,!0)},$ne:function(t,e){return t!==e},$regex:function(t,e){return e.test(t)},$in:function(t,e){return e.indexOf(t)>-1},$containsAny:function(t,e){var n;return Array.isArray(e)||(e=[e]),n=i(t,e)||function(){return!1},e.reduce(function(t,e){return t?t:n(e)},!1)},$contains:function(t,e){var n;return Array.isArray(e)||(e=[e]),n=i(t,e)||function(){return!0},e.reduce(function(t,e){return t?n(e):t},!0)}},D={$eq:A.$eq,$gt:A.$gt,$gte:A.$gte,$lt:A.$lt,$lte:A.$lte,$ne:A.$ne,$regex:A.$regex,$in:A.$in,$contains:A.$contains,$containsAny:A.$containsAny};return u.prototype.events={},u.prototype.asyncListeners=!1,u.prototype.on=function(t,e){var n=this.events[t];return n||(n=this.events[t]=[]),n.push(e),e},u.prototype.emit=function(t,e){var n=this;if(!t||!this.events[t])throw new Error("No event "+t+" defined");this.events[t].forEach(function(t){n.asyncListeners?setTimeout(function(){t(e)},1):t(e)})},u.prototype.removeListener=function(t,e){if(this.events[t]){var n=this.events[t];n.splice(n.indexOf(e),1)}},c.prototype=new u,c.prototype.configureOptions=function(t,e){var n={NODEJS:"fs",BROWSER:"localStorage",CORDOVA:"localStorage"},r={fs:h,localStorage:l};if(this.options={},this.persistenceMethod=null,this.persistenceAdapter=null,"undefined"!=typeof t){if(this.options=t,this.options.hasOwnProperty("persistenceMethod")&&"function"==typeof r[t.persistenceMethod]&&(this.persistenceMethod=t.persistenceMethod,this.persistenceAdapter=new r[t.persistenceMethod]),this.options.hasOwnProperty("adapter")&&(this.persistenceMethod="adapter",this.persistenceAdapter=t.adapter),t.hasOwnProperty("autoload")&&"undefined"!=typeof e&&e){var i=this;setTimeout(function(){i.loadDatabase(t,t.autoloadCallback)},1)}this.options.hasOwnProperty("autosaveInterval")&&(this.autosaveDisable(),this.autosaveInterval=parseInt(this.options.autosaveInterval,10)),this.options.hasOwnProperty("autosave")&&this.options.autosave&&(this.autosaveDisable(),this.autosave=!0,this.autosaveEnable())}null===this.persistenceAdapter&&(this.persistenceMethod=n[this.ENV],this.persistenceMethod&&(this.persistenceAdapter=new r[this.persistenceMethod]))},c.prototype.anonym=function(t,e){var n=new d("anonym",e);return n.insert(t),n},c.prototype.addCollection=function(t,e){var n=new d(t,e);return this.collections.push(n),n},c.prototype.loadCollection=function(t){if(!t.name)throw new Error("Collection must be have a name property to be loaded");this.collections.push(t)},c.prototype.getCollection=function(t){var e,n=this.collections.length;for(e=0;n>e;e+=1)if(this.collections[e].name===t)return this.collections[e];return this.emit("warning","collection "+t+" not found"),null},c.prototype.listCollections=function(){for(var t=this.collections.length,e=[];t--;)e.push({name:this.collections[t].name,type:this.collections[t].objType,count:this.collections[t].data.length});return e},c.prototype.removeCollection=function(t){var e,n=this.collections.length;for(e=0;n>e;e+=1)if(this.collections[e].name===t)return void this.collections.splice(e,1)},c.prototype.getName=function(){return this.name},c.prototype.serializeReplacer=function(t,e){switch(t){case"autosaveHandle":case"persistenceAdapter":case"constraints":return null;default:return e}},c.prototype.serialize=function(){return JSON.stringify(this,this.serializeReplacer)},c.prototype.toJson=c.prototype.serialize,c.prototype.loadJSON=function(t,e){var n,r,i,o,s=JSON.parse(t),a=0,u=s.collections.length;for(this.name=s.name,this.databaseVersion=1,s.hasOwnProperty("databaseVersion")&&(this.databaseVersion=s.databaseVersion),this.collections=[],a;u>a;a+=1){if(n=s.collections[a],r=this.addCollection(n.name),i=n.data.length,o=0,e&&e.hasOwnProperty(n.name)){var c=e[n.name].inflate?e[n.name].inflate:O.copyProperties;for(o;i>o;o++){var h=new e[n.name].proto;c(n.data[o],h),r.data[o]=h}}else for(o;i>o;o++)r.data[o]=n.data[o];if(r.transactional=n.transactional,r.asyncListeners=n.asyncListeners,r.disableChangesApi=n.disableChangesApi,r.cloneObjects=n.cloneObjects,r.maxId=0===n.data.length?0:n.maxId,r.idIndex=n.idIndex,"undefined"!=typeof n.indices&&(r.idIndex=n.indices.id),"undefined"!=typeof n.binaryIndices&&(r.binaryIndices=n.binaryIndices),r.ensureId(),"undefined"!=typeof n.DynamicViews)for(var l=0;l<n.DynamicViews.length;l++){var f=n.DynamicViews[l],p=r.addDynamicView(f.name,f.persistent);p.resultdata=f.resultdata,p.resultsdirty=f.resultsdirty,p.filterPipeline=f.filterPipeline,p.sortCriteria=f.sortCriteria,p.sortFunction=null,p.sortDirty=f.sortDirty,p.resultset.filteredrows=f.resultset.filteredrows,p.resultset.searchIsChained=f.resultset.searchIsChained,p.resultset.filterInitialized=f.resultset.filterInitialized,p.rematerialize({removeWhereFilters:!0})}}},c.prototype.close=function(t){this.autosave&&(this.autosaveDisable(),
this.autosaveDirty()&&this.saveDatabase()),t&&this.on("close",t),this.emit("close")},c.prototype.generateChangesNotification=function(t){function e(t){return t.name}var n=[],r=t||this.collections.map(e);return this.collections.forEach(function(t){-1!==r.indexOf(e(t))&&(n=n.concat(t.getChanges()))}),n},c.prototype.serializeChanges=function(t){return JSON.stringify(this.generateChangesNotification(t))},c.prototype.clearChanges=function(){this.collections.forEach(function(t){t.flushChanges&&t.flushChanges()})},h.prototype.loadDatabase=function(t,e){this.fs.readFile(t,{encoding:"utf8"},function(t,n){e(t?new Error(t):n)})},h.prototype.saveDatabase=function(t,e,n){this.fs.writeFile(t,e,n)},l.prototype.loadDatabase=function(t,e){e(a()?localStorage.getItem(t):new Error("localStorage is not available"))},l.prototype.saveDatabase=function(t,e,n){a()?(localStorage.setItem(t,e),n(null)):n(new Error("localStorage is not available"))},c.prototype.loadDatabase=function(t,e){var n=e||function(t,e){if(t)throw t},r=this;null!==this.persistenceAdapter?this.persistenceAdapter.loadDatabase(this.filename,function(e){"string"==typeof e?(r.loadJSON(e,t||{}),n(null)):(console.warn("lokijs loadDatabase : Database not found"),n("object"==typeof e?e:"Database not found"))}):n(new Error("persistenceAdapter not configured"))},c.prototype.saveDatabase=function(t){var e=t||function(t){if(t)throw t},n=this;null!==this.persistenceAdapter?this.persistenceAdapter.saveDatabase(this.filename,n.serialize(),function(){n.autosaveClearFlags(),e(null)}):e(new Error("persistenceAdapter not configured"))},c.prototype.save=c.prototype.saveDatabase,c.prototype.autosaveDirty=function(){for(var t=0;t<this.collections.length;t++)if(this.collections[t].dirty)return!0;return!1},c.prototype.autosaveClearFlags=function(){for(var t=0;t<this.collections.length;t++)this.collections[t].dirty=!1},c.prototype.autosaveEnable=function(){this.autosave=!0;var t=5e3,e=this;"undefined"!=typeof this.autosaveInterval&&null!==this.autosaveInterval&&(t=this.autosaveInterval),this.autosaveHandle=setInterval(function(){e.autosaveDirty()&&e.saveDatabase()},t)},c.prototype.autosaveDisable=function(){"undefined"!=typeof this.autosaveHandle&&null!==this.autosaveHandle&&(clearInterval(this.autosaveHandle),this.autosaveHandle=null)},f.prototype.toJSON=function(){var t=this.copy();return t.collection=null,t},f.prototype.limit=function(t){this.searchIsChained&&!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=Object.keys(this.collection.data));var e=this.copy();return e.filteredrows=e.filteredrows.slice(0,t),e},f.prototype.offset=function(t){this.searchIsChained&&!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=Object.keys(this.collection.data));var e=this.copy();return e.filteredrows=e.filteredrows.splice(t,e.filteredrows.length),e},f.prototype.copy=function(){var t=new f(this.collection,null,null);return t.filteredrows=this.filteredrows.slice(),t.filterInitialized=this.filterInitialized,t},f.prototype.branch=f.prototype.copy,f.prototype.sort=function(t){this.searchIsChained&&!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=Object.keys(this.collection.data));var e=function(t,e){return function(n,r){var i=e.collection.data[n],o=e.collection.data[r];return t(i,o)}}(t,this);return this.filteredrows.sort(e),this},f.prototype.simplesort=function(t,e){this.searchIsChained&&!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=Object.keys(this.collection.data)),"undefined"==typeof e&&(e=!1);var n=function(t,e,n){return function(i,o){var s=n.collection.data[i],a=n.collection.data[o];return r(s[t],a[t],e)}}(t,e,this);return this.filteredrows.sort(n),this},f.prototype.compoundeval=function(t,e,n){var i=t.length;if(0===i)throw new Error("Invalid call to compoundeval, need at least one property");var o=!1,s=t[0];return"string"!=typeof s&&Array.isArray(s)&&(o=s[1],s=s[0]),e[s]===n[s]?1===i?0:this.compoundeval(t.slice(1),e,n,o):r(e[s],n[s],o)},f.prototype.compoundsort=function(t){this.searchIsChained&&!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=Object.keys(this.collection.data));var e=function(t,e){return function(n,r){var i=e.collection.data[n],o=e.collection.data[r];return e.compoundeval(t,i,o)}}(t,this);return this.filteredrows.sort(e),this},f.prototype.calculateRange=function(n,r,i){var o=this.collection.data,s=this.collection.binaryIndices[r].values,a=0,u=s.length-1,c=null,h=0,l=s.length-1;if(0===o.length)return[0,-1];var f=o[s[a]][r],p=o[s[u]][r];switch(n){case"$eq":if(t(i,f)||e(i,p))return[0,-1];break;case"$gt":if(e(i,p,!0))return[0,-1];break;case"$gte":if(e(i,p))return[0,-1];break;case"$lt":if(t(i,f,!0))return[0,-1];break;case"$lte":if(t(i,f))return[0,-1]}for(;u>a;)c=Math.floor((a+u)/2),t(o[s[c]][r],i)?a=c+1:u=c;for(h=a,a=0,u=s.length-1;u>a;)c=Math.floor((a+u)/2),t(i,o[s[c]][r])?u=c:a=c+1;l=u;var d=o[s[h]][r],y=o[s[l]][r];switch(n){case"$eq":return d!==i?[0,-1]:(y!==i&&l--,[h,l]);case"$gt":return t(y,i,!0)?[0,-1]:[l,o.length-1];case"$gte":return t(d,i)?[0,-1]:[h,o.length-1];case"$lt":return 0===h&&t(d,i)?[0,0]:[0,h-1];case"$lte":return y!==i&&l--,0===l&&t(y,i)?[0,0]:[0,l];default:return[0,o.length-1]}},f.prototype.findOr=function(t){var e=0,n=0,r=null,i=[],o=null;if(this.filterInitialized){for(i=[],n=0;n<t.length;n++)for(o=this.branch(),o.find(t[n]),o.data(),r=o.filteredrows,e=0;e<r.length;e++)-1===i.indexOf(r[e])&&i.push(r[e]);this.filteredrows=i}else for(n=0;n<t.length;n++)for(o=this.collection.chain(),o.find(t[n]),o.data(),r=o.filteredrows,e=0;e<r.length;e++)-1===this.filteredrows.indexOf(r[e])&&this.filteredrows.push(r[e]);return this.filterInitialized=!0,this},f.prototype.findAnd=function(t){for(var e=0;e<t.length;e++)this.find(t[e]);return this},f.prototype.dotSubScan=function(t,e,n,r){var i,o,s,a=null,u=e.split(".");for(i=0;i<u.length;i++)if(s=u[i],a){for(o=0;o<a.length;o++)if(n(a[o][s],r))return!0}else t=t[s],Array.isArray(t)&&(a=t);return n(t,r)},f.prototype.find=function(t,e){if(0===this.collection.data.length)return this.searchIsChained?(this.filteredrows=[],this.filterInitialized=!0,this):[];var n,r,i,o,s,a,u,c,h=t||"getAll",l=!1,f=[],p=null,d=!0;e=e||!1;for(o in h){d=!1;break}if(d&&(h="getAll"),"getAll"===h)return this.searchIsChained?(this.filteredrows=Object.keys(this.collection.data),this):this.collection.data;var y=!1;for(o in h)if(h.hasOwnProperty(o)){if(n=o,"$and"===o)return this.searchIsChained?(this.findAnd(h[o]),e&&this.filteredrows.length>1&&(this.filteredrows=this.filteredrows.slice(0,1)),this):(f=this.collection.chain().findAnd(h[o]).data(),e?0===f.length?[]:f[0]:f);if("$or"===o)return this.searchIsChained?(this.findOr(h[o]),e&&this.filteredrows.length>1&&(this.filteredrows=this.filteredrows.slice(0,1)),this):(f=this.collection.chain().findOr(h[o]).data(),e?0===f.length?[]:f[0]:f);if(-1!=o.indexOf(".")&&(y=!0),"object"!=typeof h[o])i="$eq",r=h[o];else{if("object"!=typeof h[o])throw"Do not know what you want to do.";for(s in h[o])h[o].hasOwnProperty(s)&&(i=s,r=h[o][s])}break}if("$regex"===i&&(r=new RegExp(r)),null===this.collection.data)throw new TypeError;if((!this.searchIsChained||this.searchIsChained&&!this.filterInitialized)&&"$ne"!==i&&"$regex"!==i&&"$contains"!==i&&"$containsAny"!==i&&"$in"!==i&&this.collection.binaryIndices.hasOwnProperty(n)&&(this.collection.ensureIndex(n),l=!0,p=this.collection.binaryIndices[n]),a=D[i],this.searchIsChained){if(this.filterInitialized){if(l)for(u=p,c=this.filteredrows.length;c--;)a(u[this.filteredrows[c]],r)&&f.push(this.filteredrows[c]);else if(u=this.collection.data,c=this.filteredrows.length,y)for(;c--;)this.dotSubScan(u[this.filteredrows[c]],n,a,r)&&f.push(this.filteredrows[c]);else for(;c--;)a(u[this.filteredrows[c]][n],r)&&f.push(this.filteredrows[c]);return this.filteredrows=f,this}if(l){u=this.collection.data;for(var v=this.calculateRange(i,n,r,this),g=v[0];g<=v[1];g++)f.push(p.values[g]);this.filteredrows=f}else if(u=this.collection.data,c=u.length,y)for(;c--;)this.dotSubScan(u[c],n,a,r)&&f.push(c);else for(;c--;)a(u[c][n],r)&&f.push(c);return this.filteredrows=f,this.filterInitialized=!0,this}if(l){u=this.collection.data;var m=this.calculateRange(i,n,r,this);if(e)return-1!==m[1]?u[p.values[m[0]]]:[];for(c=m[0];c<=m[1];c++)f.push(u[p.values[c]]);this.filteredrows=f}else{if(u=this.collection.data,c=u.length,e){for(;c--;)if(a(u[c][n],r))return u[c];return[]}if(y)for(;c--;)this.dotSubScan(u[c],n,a,r)&&f.push(u[c]);else for(;c--;)a(u[c][n],r)&&f.push(u[c])}return f},f.prototype.where=function(t){var e,n=[];if("function"!=typeof t)throw"Argument is not a stored view or a function";e=t;try{if(this.searchIsChained){if(this.filterInitialized){for(var r=this.filteredrows.length;r--;)e(this.collection.data[this.filteredrows[r]])===!0&&n.push(this.filteredrows[r]);return this.filteredrows=n,this}for(var i=this.collection.data.length;i--;)e(this.collection.data[i])===!0&&n.push(i);return this.filteredrows=n,this.filterInitialized=!0,this}for(var o=this.collection.data.length;o--;)e(this.collection.data[o])===!0&&n.push(this.collection.data[o]);return n}catch(s){throw s}},f.prototype.data=function(){var t=[];if(this.searchIsChained&&!this.filterInitialized){if(0===this.filteredrows.length)return this.collection.data;this.filterInitialized=!0}var e,n=this.collection.data,r=this.filteredrows,i=this.filteredrows.length;for(e=0;i>e;e++)t.push(n[r[e]]);return t},f.prototype.update=function(t){if("function"!=typeof t)throw"Argument is not a function";this.searchIsChained&&!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=Object.keys(this.collection.data));for(var e=this.filteredrows.length,n=this.collection.data,r=0;e>r;r++)t(n[this.filteredrows[r]]),this.collection.update(n[this.filteredrows[r]]);return this},f.prototype.remove=function(){this.searchIsChained&&!this.filterInitialized&&0===this.filteredrows.length&&(this.filteredrows=Object.keys(this.collection.data));for(var t=this.filteredrows.length,e=0;t>e;e++)this.collection.remove(this.filteredrows[e]);return this.filteredrows=[],this},f.prototype.mapReduce=function(t,e){try{return e(this.data().map(t))}catch(n){throw n}},f.prototype.eqJoin=function(t,e,n,r){var i,o,s,a=[],u=[],c=[],h="function"==typeof e,l="function"==typeof n,p={};if(a=this.data(),i=a.length,t instanceof f)u=t.data();else{if(!Array.isArray(t))throw new TypeError("joinData needs to be an array or result set");u=t}o=u.length;for(var y=0;o>y;y++)s=l?n(u[y]):u[y][n],p[s]=u[y];r||(r=function(t,e){return{left:t,right:e}});for(var v=0;i>v;v++)s=h?e(a[v]):a[v][e],c.push(r(a[v],p[s]||{}));return this.collection=new d("joinData"),this.collection.insert(c),this.filteredrows=[],this.filterInitialized=!1,this},f.prototype.map=function(t){var e=this.data().map(t);return this.collection=new d("mappedData"),this.collection.insert(e),this.filteredrows=[],this.filterInitialized=!1,this},p.prototype=new u,p.prototype.rematerialize=function(t){var e,n,r;if(t=t||{},this.resultdata=[],this.resultsdirty=!0,this.resultset=new f(this.collection),(this.sortFunction||this.sortCriteria)&&(this.sortDirty=!0),t.hasOwnProperty("removeWhereFilters"))for(e=this.filterPipeline.length,n=e;n--;)"where"===this.filterPipeline[n].type&&(n!==this.filterPipeline.length-1&&(this.filterPipeline[n]=this.filterPipeline[this.filterPipeline.length-1]),this.filterPipeline.length--);var i=this.filterPipeline;for(this.filterPipeline=[],e=i.length,r=0;e>r;r++)this.applyFind(i[r].val);return this.data(),this.emit("rebuild",this),this},p.prototype.branchResultset=function(){return this.resultset.copy()},p.prototype.toJSON=function(){var t=new p(this.collection,this.name,this.persistent);return t.resultset=this.resultset,t.resultdata=[],t.resultsdirty=!0,t.filterPipeline=this.filterPipeline,t.sortFunction=this.sortFunction,t.sortCriteria=this.sortCriteria,t.sortDirty=this.sortDirty,t.collection=null,t},p.prototype.applySort=function(t){return this.sortFunction=t,this.sortCriteria=null,this.queueSortPhase(),this},p.prototype.applySimpleSort=function(t,e){return"undefined"==typeof e&&(e=!1),this.sortCriteria=[[t,e]],this.sortFunction=null,this.queueSortPhase(),this},p.prototype.applySortCriteria=function(t){return this.sortCriterial=t,this.sortFunction=null,this.queueSortPhase(),this},p.prototype.startTransaction=function(){return this.cachedresultset=this.resultset.copy(),this},p.prototype.commit=function(){return this.cachedresultset=null,this},p.prototype.rollback=function(){return this.resultset=this.cachedresultset,this.persistent&&(this.resultdata=this.resultset.data(),this.emit("rebuild",this)),this},p.prototype.applyFind=function(t){return this.filterPipeline.push({type:"find",val:t}),this.resultset.find(t),(this.sortFunction||this.sortCriteria)&&(this.sortDirty=!0,this.queueSortPhase()),this.persistent&&(this.resultsdirty=!0,this.queueSortPhase()),this},p.prototype.applyWhere=function(t){return this.filterPipeline.push({type:"where",val:t}),this.resultset.where(t),(this.sortFunction||this.sortCriteria)&&(this.sortDirty=!0,this.queueSortPhase()),this.persistent&&(this.resultsdirty=!0,this.queueSortPhase()),this},p.prototype.data=function(){return(this.sortDirty||this.resultsdirty||!this.resultset.filterInitialized)&&this.performSortPhase(),this.persistent?this.resultdata:this.resultset.data()},p.prototype.queueSortPhase=function(){var t=this;this.sortDirty||(this.sortDirty=!0,setTimeout(function(){t.performSortPhase()},1))},p.prototype.performSortPhase=function(){if(this.sortDirty||this.resultsdirty||!this.resultset.filterInitialized){if(this.sortFunction&&this.resultset.sort(this.sortFunction),this.sortCriteria&&this.resultset.compoundsort(this.sortCriteria),!this.persistent)return void(this.sortDirty=!1);this.resultdata=this.resultset.data(),this.resultsdirty=!1,this.sortDirty=!1,this.emit("rebuild",this)}},p.prototype.evaluateDocument=function(t){var e=this.resultset.filteredrows,n=e.indexOf(t),r=e.length,i=new f(this.collection);i.filteredrows=[t],i.filterInitialized=!0;for(var o=0;o<this.filterPipeline.length;o++)switch(this.filterPipeline[o].type){case"find":i.find(this.filterPipeline[o].val);break;case"where":i.where(this.filterPipeline[o].val)}var s=0===i.filteredrows.length?-1:0;return-1!=n||-1!=s?-1===n&&-1!==s?(e.push(t),this.persistent&&this.resultdata.push(this.collection.data[t]),void((this.sortFunction||this.sortCriteria)&&this.queueSortPhase())):-1!==n&&-1===s?(r-1>n?(e[n]=e[r-1],e.length=r-1,this.persistent&&(this.resultdata[n]=this.resultdata[r-1],this.resultdata.length=r-1)):(e.length=r-1,this.persistent&&(this.resultdata.length=r-1)),void((this.sortFunction||this.sortCriteria)&&this.queueSortPhase())):-1!==n&&-1!==s?(this.persistent&&(this.resultdata[n]=this.collection.data[t]),void((this.sortFunction||this.sortCriteria)&&(this.sortDirty=!0))):void 0:void 0},p.prototype.removeDocument=function(t){var e,n=this.resultset.filteredrows,r=n.indexOf(t),i=n.length;for(-1!==r&&(i-1>r?(n[r]=n[i-1],n.length=i-1,this.persistent&&(this.resultdata[r]=this.resultdata[i-1],this.resultdata.length=i-1)):(n.length=i-1,this.persistent&&(this.resultdata.length=i-1)),(this.sortFunction||this.sortCriteria)&&this.queueSortPhase()),i=n.length,e=0;i>e;e++)n[e]>t&&n[e]--},p.prototype.mapReduce=function(t,e){try{return e(this.data().map(t))}catch(n){throw n}},d.prototype=new u,d.prototype.byExample=function(t){var e,n,r;r=[];for(e in t)t.hasOwnProperty(e)&&r.push((n={},n[e]=t[e],n));return{$and:r}},d.prototype.findObject=function(t){return this.findOne(this.byExample(t))},d.prototype.findObjects=function(t){return this.find(this.byExample(t))},d.prototype.ensureIndex=function(n,r){if("undefined"==typeof r&&(r=!1),null===n||void 0===n)throw"Attempting to set index without an associated property";if(!this.binaryIndices.hasOwnProperty(n)||r||this.binaryIndices[n].dirty){this.binaryIndices[n]={name:n,dirty:!0,values:[]};var i,o=this.data.length,s=0;for(i=this.binaryIndices[n],s;o>s;s+=1)i.values.push(s);var a=function(n,r){return function(i,o){var s=r.data[i],a=r.data[o];return s[n]===a[n]?0:e(s[n],a[n])?1:t(s[n],a[n])?-1:void 0}}(n,this);i.values.sort(a),i.dirty=!1,this.dirty=!0}},d.prototype.ensureUniqueIndex=function(t){var e=this.constraints.unique[t];e||(this.constraints.unique[t]=e=new k(t));return this.data.forEach(function(t){e.set(t)}),e},d.prototype.ensureAllIndexes=function(t){for(var e=Object.keys(this.binaryIndices),n=e.length;n--;)this.ensureIndex(e[n],t)},d.prototype.flagBinaryIndexesDirty=function(){for(var t=Object.keys(this.binaryIndices),e=t.length;e--;)this.binaryIndices[t[e]].dirty=!0},d.prototype.count=function(){return this.data.length},d.prototype.ensureId=function(){var t=this.data.length,e=0;for(this.idIndex=[],e;t>e;e+=1)this.idIndex.push(this.data[e].$loki)},d.prototype.ensureIdAsync=function(t){this.async(function(){this.ensureId()},t)},d.prototype.addDynamicView=function(t,e){var n=new p(this,t,e);return this.DynamicViews.push(n),n},d.prototype.removeDynamicView=function(t){for(var e=0;e<this.DynamicViews.length;e++)this.DynamicViews[e].name===t&&this.DynamicViews.splice(e,1)},d.prototype.getDynamicView=function(t){for(var e=0;e<this.DynamicViews.length;e++)if(this.DynamicViews[e].name===t)return this.DynamicViews[e];return null},d.prototype.findAndUpdate=function(t,e){var n,r=this.where(t),i=0;try{for(i;i<r.length;i++)n=e(r[i]),this.update(n)}catch(o){this.rollback(),console.error(o.message)}},d.prototype.insert=function(t){if(!t){var e=new Error("Object cannot be null");throw this.emit("error",e),e}var n,r=this,i=Array.isArray(t)?t:[t],o=[];return i.forEach(function(t){if("object"!=typeof t)throw new TypeError("Document needs to be an object");return n=r.cloneObjects?JSON.parse(JSON.stringify(t)):t,"undefined"==typeof n.meta&&(n.meta={revision:0,created:0}),r.emit("pre-insert",n),r.add(n)?(r.emit("insert",n),void o.push(n)):void 0}),1===o.length?o[0]:o},d.prototype.clear=function(){this.data=[],this.idIndex=[],this.binaryIndices={},this.cachedIndex=null,this.cachedData=null,this.maxId=0,this.DynamicViews=[],this.dirty=!0},d.prototype.update=function(t){if(Object.keys(this.binaryIndices).length>0&&this.flagBinaryIndexesDirty(),Array.isArray(t)){var e=0,n=t.length;for(e;n>e;e+=1)this.update(t[e])}else{if(!t.hasOwnProperty("$loki"))throw"Trying to update unsynced document. Please save the document first by using insert() or addMany()";try{this.startTransaction();var r,i,o=this.get(t.$loki,!0),s=this;if(!o)throw new Error("Trying to update a document not in collection.");this.emit("pre-update",t),r=o[0],Object.keys(this.constraints.unique).forEach(function(t){s.constraints.unique[t].update(r)}),i=o[1],this.data[i]=t;for(var a=0;a<this.DynamicViews.length;a++)this.DynamicViews[a].evaluateDocument(i);this.idIndex[i]=r.$loki,this.commit(),this.dirty=!0,this.emit("update",t)}catch(u){throw this.rollback(),console.error(u.message),this.emit("error",u),u}}},d.prototype.add=function(t){var e=this.DynamicViews.length;if("object"!=typeof t)throw"Object being added needs to be an object";if(Object.keys(this.binaryIndices).length>0&&this.flagBinaryIndexesDirty(),"undefined"!=typeof t.$loki)throw"Document is already in collection, please use update()";try{this.startTransaction(),this.maxId++,isNaN(this.maxId)&&(this.maxId=this.data[this.data.length-1].$loki+1),t.$loki=this.maxId,t.meta.version=0,this.data.push(t);var n=this;Object.keys(this.constraints.unique).forEach(function(e){n.constraints.unique[e].set(t)});for(var r=0;e>r;r++)this.DynamicViews[r].evaluateDocument(this.data.length-1);return this.idIndex.push(t.$loki),this.commit(),this.dirty=!0,t}catch(i){this.rollback(),console.error(i.message)}},d.prototype.removeWhere=function(t){var e;e="function"==typeof t?this.data.filter(t):new f(this,t);for(var n=e.length;n--;)this.remove(e[n]);var r;for(r in this.DynamicViews)this.DynamicViews[r].rematerialize()},d.prototype.removeDataOnly=function(){this.removeWhere(function(t){return!0})},d.prototype.remove=function(t){if("number"==typeof t&&(t=this.get(t)),"object"!=typeof t)throw new Error("Parameter is not an object");if(Array.isArray(t)){var e=0,n=t.length;for(e;n>e;e+=1)this.remove(t[e])}else{if(!t.hasOwnProperty("$loki"))throw new Error("Object is not a document stored in the collection");Object.keys(this.binaryIndices).length>0&&this.flagBinaryIndexesDirty();try{this.startTransaction();var r=this.get(t.$loki,!0),i=r[1],o=this;Object.keys(this.constraints.unique).forEach(function(e){o.constraints.unique[e].remove(t)});for(var s=0;s<this.DynamicViews.length;s++)this.DynamicViews[s].removeDocument(i);return this.data.splice(i,1),this.idIndex.splice(i,1),this.commit(),this.dirty=!0,this.emit("delete",r[0]),delete t.$loki,delete t.meta,t}catch(a){return this.rollback(),console.error(a.message),this.emit("error",a),null}}},d.prototype.get=function(t,e){var n=e||!1,r=this.idIndex,i=r.length-1,o=0,s=Math.floor(o+(i-o)/2);if(t="number"==typeof t?t:parseInt(t,10),isNaN(t))throw"Passed id is not an integer";for(;r[o]<r[i];)s=Math.floor((o+i)/2),r[s]<t?o=s+1:i=s;return i===o&&r[o]===t?n?[this.data[o],o]:this.data[o]:null},d.prototype.by=function(t,e){var n;return e?this.constraints.unique[t].get(e):(n=this,function(e){return n.by(t,e)})},d.prototype.findOne=function(t){var e=new f(this,t,null,!0);return Array.isArray(e)&&0===e.length?null:e},d.prototype.chain=function(){return new f(this,null,null)},d.prototype.find=function(t){return"undefined"==typeof t&&(t="getAll"),new f(this,t,null)},d.prototype.findOneUnindexed=function(t,e){for(var n,r=this.data.length;r--;)if(this.data[r][t]===e)return n=this.data[r];return null},d.prototype.startTransaction=function(){if(this.transactional){this.cachedData=o(this.data,"parse-stringify"),this.cachedIndex=this.idIndex,this.cachedBinaryIndex=this.binaryIndices;for(var t=0;t<this.DynamicViews.length;t++)this.DynamicViews[t].startTransaction()}},d.prototype.commit=function(){if(this.transactional){this.cachedData=null,this.cachedIndex=null,this.cachedBinaryIndices=null;for(var t=0;t<this.DynamicViews.length;t++)this.DynamicViews[t].commit()}},d.prototype.rollback=function(){if(this.transactional){null!==this.cachedData&&null!==this.cachedIndex&&(this.data=this.cachedData,this.idIndex=this.cachedIndex,this.binaryIndices=this.cachedBinaryIndex);for(var t=0;t<this.DynamicViews.length;t++)this.DynamicViews[t].rollback()}},d.prototype.async=function(t,e){setTimeout(function(){if("function"!=typeof t)throw"Argument passed for async execution is not a function";t(),e()},0)},d.prototype.where=function(t){return new f(this,null,t)},d.prototype.mapReduce=function(t,e){try{return e(this.data.map(t))}catch(n){throw n}},d.prototype.eqJoin=function(t,e,n,r){return new f(this).eqJoin(t,e,n,r)},d.prototype.stages={},d.prototype.getStage=function(t){return this.stages[t]||(this.stages[t]={}),this.stages[t]},d.prototype.commitLog=[],d.prototype.stage=function(t,e){var n=JSON.parse(JSON.stringify(e));return this.getStage(t)[e.$loki]=n,n},d.prototype.commitStage=function(t,e){var n,r=this.getStage(t),i=(new Date).getTime();for(n in r)this.update(r[n]),this.commitLog.push({timestamp:i,message:e,data:JSON.parse(JSON.stringify(r[n]))});this.stages[t]={}},d.prototype.no_op=function(){},d.prototype.extract=function(t){var e=0,n=this.data.length,r=y(t),i=[];for(e;n>e;e+=1)i.push(b(this.data[e],t,r));return i},d.prototype.max=function(t){return Math.max.apply(null,this.extract(t))},d.prototype.min=function(t){return Math.min.apply(null,this.extract(t))},d.prototype.maxRecord=function(t){var e,n=0,r=this.data.length,i=y(t),o={index:0,value:void 0};for(n;r>n;n+=1)void 0!==e?e<b(this.data[n],t,i)&&(e=b(this.data[n],t,i),o.index=this.data[n].$loki):(e=b(this.data[n],t,i),o.index=this.data[n].$loki);return o.value=e,o},d.prototype.minRecord=function(t){var e,n=0,r=this.data.length,i=y(t),o={index:0,value:void 0};for(n;r>n;n+=1)void 0!==e?e>b(this.data[n],t,i)&&(e=b(this.data[n],t,i),o.index=this.data[n].$loki):(e=b(this.data[n],t,i),o.index=this.data[n].$loki);return o.value=e,o},d.prototype.extractNumerical=function(t){return this.extract(t).map(v).filter(Number).filter(function(t){return!isNaN(t)})},d.prototype.avg=function(t){return _(this.extractNumerical(t))},d.prototype.stdDev=function(t){return w(this.extractNumerical(t))},d.prototype.mode=function(t){var e={},n=this.extract(t);n.forEach(function(t){e[t]?e[t]+=1:e[t]=1});var r,i,o;for(i in e)r?r<e[i]&&(o=i):(o=i,r=e[i]);return o},d.prototype.median=function(t){var e=this.extractNumerical(t);e.sort(m);var n=Math.floor(e.length/2);return e.length%2?e[n]:(e[n-1]+e[n])/2},I.prototype={keys:[],values:[],sort:function(t,e){return e>t?-1:t>e?1:0},setSort:function(t){this.bs=new S(t)},bs:function(){return new S(this.sort)},set:function(t,e){var n=this.bs(this.keys,t);n.found?this.values[n.index]=e:(this.keys.splice(n.index,0,t),this.values.splice(n.index,0,e))},get:function(t){return this.values[x(this.keys,t,this.sort).index]}},k.prototype.keyMap={},k.prototype.lokiMap={},k.prototype.set=function(t){if(this.keyMap[t[this.field]])throw new Error("Duplicate key for property "+this.field+": "+t[this.field]);this.keyMap[t[this.field]]=t,this.lokiMap[t.$loki]=t[this.field]},k.prototype.get=function(t){return this.keyMap[t]},k.prototype.byId=function(t){return this.keyMap[this.lokiMap[t]]},k.prototype.update=function(t){if(this.lokiMap[t.$loki]!==t[this.field]){var e=this.lokiMap[t.$loki];this.set(t),this.keyMap[e]=void 0}else this.keyMap[t[this.field]]=t},k.prototype.remove=function(t){var e=this.keyMap[t];this.keyMap[t]=void 0,this.lokiMap[e.$loki]=void 0},k.prototype.clear=function(){this.keyMap={},this.lokiMap={}},E.prototype={set:function(t,e){this.index[t]?this.index[t].push(e):this.index[t]=[e]},remove:function(t,e){var n=this.index[t];for(var r in n)n[r]==e&&n.splice(r,1);n.length<1&&(this.index[t]=void 0)},get:function(t){return this.index[t]},clear:function(t){this.index={}}},j.prototype={keys:[],values:[],sort:function(t,e){return e>t?-1:t>e?1:0},bs:function(){return new S(this.sort)},setSort:function(t){this.bs=new S(t)},set:function(t,e){var n=x(this.keys,t,this.sort);n.found?this.values[n.index].push(e):(this.keys.splice(n.index,0,t),this.values.splice(n.index,0,[e]))},get:function(t){var e=x(this.keys,t,this.sort);return e.found?this.values[e.index]:[]},getLt:function(t){var e=x(this.keys,t,this.sort),n=e.index;return e.found&&n--,this.getAll(t,0,n)},getGt:function(t){var e=x(this.keys,t,this.sort),n=e.index;return e.found&&n++,this.getAll(t,n,this.keys.length)},getAll:function(t,e,n){for(var r=[],i=e;n>i;i++)r=r.concat(this.values[i]);return r},getPos:function(t){return x(this.keys,t,this.sort)},remove:function(t,e){var n=x(this.keys,t,this.sort).index,r=this.values[n];for(var i in r)r[i]==e&&r.splice(i,1);r.length<1&&(this.keys.splice(n,1),this.values.splice(n,1))},clear:function(t){this.keys=[],this.values=[]}},c.Collection=d,c.KeyValueStore=I,c}()})}).call(e,function(){return this}())},function(t,e){console.log("I'm `fs` modules")},function(t,e){"use strict";var n={v4:function(){var t=Math.round(1e6-5e5*Math.random());return t}};t.exports=n},function(t,e,n){"use strict";var r=n(5),i={},o=function(t){if(i[t])return i[t];var e=r.createActions(["add","update","destroy","filter","sort","search","registerView","resetView","reload","populate","onPopulateSuccess","destroyAll","setObject","setCollection"]);return t&&(i[t]=e),e};t.exports=o},function(t,e,n){"use strict";function r(t,e){return void 0===t&&(t=null),e}var i=n(5),o=n(3),s={registerStore:function(t,e,n){this.store=e,this.name=""+e.name+"Synchronizer",this.idAttribute=t.idAttribute,this.client=n,this.onError=t.onError,this.setDeserializer(),this.listenTo(e,this.onStoreChange),this.listenTo(e.listenables.populate,this.populate)},onStoreChange:function(t,e){var n=void 0===arguments[2]?!0:arguments[2],r=["add","update","destroy"];n&&o.contains(r,t)&&this[t](e)},setSerializer:function(t){this.serializer=t},setDeserializer:function(){var t=void 0===arguments[0]?r:arguments[0];this.deserializer=t},setClient:function(t){this.client=t},_logError:function(t,e){this.onError&&this.onError(this.name,t,e)},populate:function(t,e){var n=this;this.client.getAll(t,e).then(function(e){var r;e.constructor===Array?(r=e.map(n.deserializer.bind(null,t)),n.store.listenables.setCollection(r),setTimeout(function(){n.store.listenables.onPopulateSuccess()},1e3)):(r=n.deserializer(t,e),n.store.listenables.setObject(r)),n.trigger("populate",e)}).fail(function(t){n._logError("populate",t),console.error(t)})},reload:function(t){var e=this;this.client.get(t.id).then(function(n){e._updateSuccess(t,n)}).fail(function(t){e._logError("reload",t),console.error(t)})},update:function(t){var e=this;this.client.update(t,this.serializer).then(function(n){e._updateSuccess(t,n),e.store.flushChanges()}).fail(function(t){e._logError("update",t),console.error(t)})},_updateSuccess:function(t,e){var n=o.extend({},t,e);this.store.listenables.setObject(n),this.trigger("update",n)},destroy:function(t){var e=this;this.client.destroy(t).then(function(t){e.trigger("destroy",t),e.store.flushChanges()}).fail(function(t){e._logError("destroy",t),console.error(t)})},add:function(t){var e=this,n=o.clone(t);delete n.id,this.client.add(n,this.serializer).then(function(r){e.store.listenables.setObject(o.extend({},n,r)),e.store.flushChanges(),r.oldId=t.id,e.trigger("add",r)}).fail(function(t){e._logError("add",t),console.error(t)})}};t.exports=function(t,e,n){var r=i.createStore(s);return r.registerStore(t,e,n),r}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(38),s=n(3),a=n(39),u=function(){function t(e,n){var i=this;r(this,t),this.basePath=n.basePath,this.endpoint=n.endpoint,this.resource=n.resource,this.headers=n.headers,this.name=n.name,Object.keys(e).forEach(function(t){i[t]=e[t].bind(i)})}return i(t,[{key:"defaultSerializer",value:function(t){var e=s.clone(t),n={};return delete e.$loki,delete e.meta,this.resource?n[this.resource]=e:n=e,JSON.stringify(n)}},{key:"_success",value:function(t,e){return t.resolve(e)}},{key:"_error",value:function(t,e){return t.reject(e)}},{key:"serialize",value:function(t){return this._serialize?this._serialize(t):t}},{key:"add",value:function(t){var e=void 0===arguments[1]?this.defaultSerializer:arguments[1],n=o.defer(),r={url:this._getResourceUrl(t),method:"post",data:e.call(this,t),headers:this.headers(),error:this._error.bind(null,n),success:this._success.bind(null,n)};return r.url&&a(r),n.promise}},{key:"destroy",value:function(t){var e=o.defer(),n={url:this._getObjectUrl(t),method:"delete",headers:this.headers(),error:this._error.bind(null,e),success:this._success.bind(null,e)};return n.url&&a(n),e.promise}},{key:"update",value:function(t){var e=void 0===arguments[1]?this.defaultSerializer:arguments[1],n=o.defer(),r={url:this._getObjectUrl(t.id),method:"put",data:e.call(this,t),headers:this.headers(),error:this._error.bind(null,n),success:this._success.bind(null,n)};return r.url&&a(r),n.promise}},{key:"get",value:function(t){var e=o.defer(),n={url:this._getObjectUrl(t),method:"get",headers:this.headers(),error:this._error.bind(null,e),success:this._success.bind(null,e)};return n.url&&a(n),e.promise}},{key:"getAll",value:function(t,e){var n=o.defer(),r={url:this._getResourceUrl(t,e),method:"get",headers:this.headers(),error:this._error.bind(null,n),success:this._success.bind(null,n)};return r.url&&a(r),n.promise}}]),t}();t.exports=u},function(t,e,n){(function(e,n){/*!
	 *
	 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
	 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
	 *
	 * With parts by Tyler Close
	 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
	 * at http://www.opensource.org/licenses/mit-license.html
	 * Forked at ref_send.js version: 2009-05-11
	 *
	 * With parts by Mark Miller
	 * Copyright (C) 2011 Google Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 */
!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else{t.exports=e()}}(function(){"use strict";function t(t){return function(){return Q.apply(t,arguments)}}function r(t){return t===Object(t)}function i(t){return"[object StopIteration]"===it(t)||t instanceof H}function o(t,e){if($&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(ot)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+ot+"\n");t.stack=s(i)}}function s(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var i=e[r];c(i)||a(i)||!i||n.push(i)}return n.join("\n")}function a(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function u(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function c(t){var e=u(t);if(!e)return!1;var n=e[0],r=e[1];return n===W&&r>=K&&ht>=r}function h(){if($)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=u(n);if(!r)return;return W=r[0],r[1]}}function l(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function f(t){return t instanceof v?t:w(t)?A(t):O(t)}function p(){function t(t){e=t,o.source=t,G(n,function(e,n){f.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],i=et(p.prototype),o=et(v.prototype);if(o.promiseDispatch=function(t,i,o){var s=Y(arguments);n?(n.push(s),"when"===i&&o[1]&&r.push(o[1])):f.nextTick(function(){e.promiseDispatch.apply(e,s)})},o.valueOf=function(){if(n)return o;var t=m(e);return _(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},f.longStackSupport&&$)try{throw new Error}catch(s){o.stack=s.stack.substring(s.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){e||t(f(n))},i.fulfill=function(n){e||t(O(n))},i.reject=function(n){e||t(j(n))},i.notify=function(t){e||G(r,function(e,n){f.nextTick(function(){n(t)})},void 0)},i}function d(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=p();try{t(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}return e.promise}function y(t){return d(function(e,n){for(var r=0,i=t.length;i>r;r++)f(t[r]).then(e,n)})}function v(t,e,n){void 0===e&&(e=function(t){return j(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=et(v.prototype);if(r.promiseDispatch=function(n,i,o){var s;try{s=t[i]?t[i].apply(r,o):e.call(r,i,o)}catch(a){s=j(a)}n&&n(s)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function g(t,e,n,r){return f(t).then(e,n,r)}function m(t){if(_(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function _(t){return t instanceof v}function w(t){return r(t)&&"function"==typeof t.then}function b(t){return _(t)&&"pending"===t.inspect().state}function x(t){return!_(t)||"fulfilled"===t.inspect().state}function S(t){return _(t)&&"rejected"===t.inspect().state}function I(){st.length=0,at.length=0,ct||(ct=!0)}function k(t,n){ct&&("object"==typeof e&&"function"==typeof e.emit&&f.nextTick.runAfter(function(){-1!==Z(at,t)&&(e.emit("unhandledRejection",n,t),ut.push(t))}),at.push(t),n&&"undefined"!=typeof n.stack?st.push(n.stack):st.push("(no stack) "+n))}function E(t){if(ct){var n=Z(at,t);-1!==n&&("object"==typeof e&&"function"==typeof e.emit&&f.nextTick.runAfter(function(){var r=Z(ut,t);-1!==r&&(e.emit("rejectionHandled",st[n],t),ut.splice(r,1))}),at.splice(n,1),st.splice(n,1))}}function j(t){var e=v({when:function(e){return e&&E(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return k(e,t),e}function O(t){return v({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},"delete":function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return rt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function A(t){var e=p();return f.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}}),e.promise}function D(t){return v({isDef:function(){}},function(e,n){return M(t,e,n)},function(){return f(t).inspect()})}function P(t,e,n){return f(t).spread(e,n)}function T(t){return function(){function e(t,e){var s;if("undefined"==typeof StopIteration){try{s=n[t](e)}catch(a){return j(a)}return s.done?f(s.value):g(s.value,r,o)}try{s=n[t](e)}catch(a){return i(a)?f(a.value):j(a)}return g(s,r,o)}var n=t.apply(this,arguments),r=e.bind(e,"next"),o=e.bind(e,"throw");return r()}}function C(t){f.done(f.async(t)())}function z(t){throw new H(t)}function q(t){return function(){return P([this,R(arguments)],function(e,n){return t.apply(e,n)})}}function M(t,e,n){return f(t).dispatch(e,n)}function R(t){return g(t,function(t){var e=0,n=p();return G(t,function(r,i,o){var s;_(i)&&"fulfilled"===(s=i.inspect()).state?t[o]=s.value:(++e,g(i,function(r){t[o]=r,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:o,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function L(t){if(0===t.length)return f.resolve();var e=f.defer(),n=0;return G(t,function(r,i,o){function s(t){e.resolve(t)}function a(){n--,0===n&&e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function u(t){e.notify({index:o,value:t})}var c=t[o];n++,g(c,s,a,u)},void 0),e.promise}function N(t){return g(t,function(t){return t=tt(t,f),g(R(tt(t,function(t){return g(t,J,J)})),function(){return t})})}function V(t){return f(t).allSettled()}function F(t,e){return f(t).then(void 0,void 0,e)}function U(t,e){return f(t).nodeify(e)}var $=!1;try{throw new Error}catch(B){$=!!B.stack}var W,H,K=h(),J=function(){},X=function(){function t(){for(var t,e;i.next;)i=i.next,t=i.task,i.task=void 0,e=i.domain,e&&(i.domain=void 0,e.enter()),r(t,e);for(;c.length;)t=c.pop(),r(t);s=!1}function r(e,n){try{e()}catch(r){if(u)throw n&&n.exit(),setTimeout(t,0),n&&n.enter(),r;setTimeout(function(){throw r},0)}n&&n.exit()}var i={task:void 0,next:null},o=i,s=!1,a=void 0,u=!1,c=[];if(X=function(t){o=o.next={task:t,domain:u&&e.domain,next:null},s||(s=!0,a())},"object"==typeof e&&"[object process]"===e.toString()&&e.nextTick)u=!0,a=function(){e.nextTick(t)};else if("function"==typeof n)a="undefined"!=typeof window?n.bind(window,t):function(){n(t)};else if("undefined"!=typeof MessageChannel){var h=new MessageChannel;h.port1.onmessage=function(){a=l,h.port1.onmessage=t,t()};var l=function(){h.port2.postMessage(0)};a=function(){setTimeout(t,0),l()}}else a=function(){setTimeout(t,0)};return X.runAfter=function(t){c.push(t),s||(s=!0,a())},X}(),Q=Function.call,Y=t(Array.prototype.slice),G=t(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(e=t(e,this[n],n));return e}),Z=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),tt=t(Array.prototype.map||function(t,e){var n=this,r=[];return G(n,function(i,o,s){r.push(t.call(e,o,s,n))},void 0),r}),et=Object.create||function(t){function e(){}return e.prototype=t,new e},nt=t(Object.prototype.hasOwnProperty),rt=Object.keys||function(t){var e=[];for(var n in t)nt(t,n)&&e.push(n);return e},it=t(Object.prototype.toString);H="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var ot="From previous event:";f.resolve=f,f.nextTick=X,f.longStackSupport=!1,"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(f.longStackSupport=!0),f.defer=p,p.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(Y(arguments,1)):t.resolve(n)}},f.Promise=d,f.promise=d,d.race=y,d.all=R,d.reject=j,d.resolve=f,f.passByCopy=function(t){return t},v.prototype.passByCopy=function(){return this},f.join=function(t,e){return f(t).join(e)},v.prototype.join=function(t){return f([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},f.race=y,v.prototype.race=function(){return this.then(f.race)},f.makePromise=v,v.prototype.toString=function(){return"[object Promise]"},v.prototype.then=function(t,e,n){function r(e){try{return"function"==typeof t?t(e):e}catch(n){return j(n)}}function i(t){if("function"==typeof e){o(t,a);try{return e(t)}catch(n){return j(n)}}return j(t)}function s(t){return"function"==typeof n?n(t):t}var a=this,u=p(),c=!1;return f.nextTick(function(){a.promiseDispatch(function(t){c||(c=!0,u.resolve(r(t)))},"when",[function(t){c||(c=!0,u.resolve(i(t)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=s(t)}catch(r){if(n=!0,!f.onerror)throw r;f.onerror(r)}n||u.notify(e)}]),u.promise},f.tap=function(t,e){return f(t).tap(e)},v.prototype.tap=function(t){return t=f(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},f.when=g,v.prototype.thenResolve=function(t){return this.then(function(){return t})},f.thenResolve=function(t,e){return f(t).thenResolve(e)},v.prototype.thenReject=function(t){return this.then(function(){throw t})},f.thenReject=function(t,e){return f(t).thenReject(e)},f.nearer=m,f.isPromise=_,f.isPromiseAlike=w,f.isPending=b,v.prototype.isPending=function(){return"pending"===this.inspect().state},f.isFulfilled=x,v.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},f.isRejected=S,v.prototype.isRejected=function(){return"rejected"===this.inspect().state};var st=[],at=[],ut=[],ct=!0;f.resetUnhandledRejections=I,f.getUnhandledReasons=function(){return st.slice()},f.stopUnhandledRejectionTracking=function(){I(),ct=!1},I(),f.reject=j,f.fulfill=O,f.master=D,f.spread=P,v.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},f.async=T,f.spawn=C,f["return"]=z,f.promised=q,f.dispatch=M,v.prototype.dispatch=function(t,e){var n=this,r=p();return f.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},f.get=function(t,e){return f(t).dispatch("get",[e])},v.prototype.get=function(t){return this.dispatch("get",[t])},f.set=function(t,e,n){return f(t).dispatch("set",[e,n])},v.prototype.set=function(t,e){return this.dispatch("set",[t,e])},f.del=f["delete"]=function(t,e){return f(t).dispatch("delete",[e])},v.prototype.del=v.prototype["delete"]=function(t){return this.dispatch("delete",[t])},f.mapply=f.post=function(t,e,n){return f(t).dispatch("post",[e,n])},v.prototype.mapply=v.prototype.post=function(t,e){return this.dispatch("post",[t,e])},f.send=f.mcall=f.invoke=function(t,e){return f(t).dispatch("post",[e,Y(arguments,2)])},v.prototype.send=v.prototype.mcall=v.prototype.invoke=function(t){return this.dispatch("post",[t,Y(arguments,1)])},f.fapply=function(t,e){return f(t).dispatch("apply",[void 0,e])},v.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},f["try"]=f.fcall=function(t){return f(t).dispatch("apply",[void 0,Y(arguments,1)])},v.prototype.fcall=function(){return this.dispatch("apply",[void 0,Y(arguments)])},f.fbind=function(t){var e=f(t),n=Y(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(Y(arguments))])}},v.prototype.fbind=function(){var t=this,e=Y(arguments);return function(){return t.dispatch("apply",[this,e.concat(Y(arguments))])}},f.keys=function(t){return f(t).dispatch("keys",[])},v.prototype.keys=function(){return this.dispatch("keys",[])},f.all=R,v.prototype.all=function(){return R(this)},f.any=L,v.prototype.any=function(){return L(this)},f.allResolved=l(N,"allResolved","allSettled"),v.prototype.allResolved=function(){return N(this)},f.allSettled=V,v.prototype.allSettled=function(){return this.then(function(t){return R(tt(t,function(t){function e(){return t.inspect()}return t=f(t),t.then(e,e)}))})},f.fail=f["catch"]=function(t,e){return f(t).then(void 0,e)},v.prototype.fail=v.prototype["catch"]=function(t){return this.then(void 0,t)},f.progress=F,v.prototype.progress=function(t){return this.then(void 0,void 0,t)},f.fin=f["finally"]=function(t,e){return f(t)["finally"](e)},v.prototype.fin=v.prototype["finally"]=function(t){return t=f(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},f.done=function(t,e,n,r){return f(t).done(e,n,r)},v.prototype.done=function(t,n,r){var i=function(t){f.nextTick(function(){if(o(t,s),!f.onerror)throw t;f.onerror(t)})},s=t||n||r?this.then(t,n,r):this;"object"==typeof e&&e&&e.domain&&(i=e.domain.bind(i)),s.then(void 0,i)},f.timeout=function(t,e,n){return f(t).timeout(e,n)},v.prototype.timeout=function(t,e){var n=p(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},f.delay=function(t,e){return void 0===e&&(e=t,t=void 0),f(t).delay(e)},v.prototype.delay=function(t){return this.then(function(e){var n=p();return setTimeout(function(){n.resolve(e)},t),n.promise})},f.nfapply=function(t,e){return f(t).nfapply(e)},v.prototype.nfapply=function(t){var e=p(),n=Y(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},f.nfcall=function(t){var e=Y(arguments,1);return f(t).nfapply(e)},v.prototype.nfcall=function(){var t=Y(arguments),e=p();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},f.nfbind=f.denodeify=function(t){var e=Y(arguments,1);return function(){var n=e.concat(Y(arguments)),r=p();return n.push(r.makeNodeResolver()),f(t).fapply(n).fail(r.reject),r.promise}},v.prototype.nfbind=v.prototype.denodeify=function(){var t=Y(arguments);return t.unshift(this),f.denodeify.apply(void 0,t)},f.nbind=function(t,e){var n=Y(arguments,2);return function(){function r(){return t.apply(e,arguments)}var i=n.concat(Y(arguments)),o=p();return i.push(o.makeNodeResolver()),f(r).fapply(i).fail(o.reject),o.promise}},v.prototype.nbind=function(){var t=Y(arguments,0);return t.unshift(this),f.nbind.apply(void 0,t)},f.nmapply=f.npost=function(t,e,n){return f(t).npost(e,n)},v.prototype.nmapply=v.prototype.npost=function(t,e){var n=Y(e||[]),r=p();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},f.nsend=f.nmcall=f.ninvoke=function(t,e){var n=Y(arguments,2),r=p();return n.push(r.makeNodeResolver()),f(t).dispatch("post",[e,n]).fail(r.reject),r.promise},v.prototype.nsend=v.prototype.nmcall=v.prototype.ninvoke=function(t){var e=Y(arguments,1),n=p();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},f.nodeify=U,v.prototype.nodeify=function(t){return t?void this.then(function(e){f.nextTick(function(){t(null,e)})},function(e){f.nextTick(function(){t(e)})}):this},f.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ht=h();return f})}).call(e,n(14),n(13).setImmediate)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;/*!
	  * Reqwest! A general purpose XHR connection manager
	  * license MIT (c) Dustin Diaz 2014
	  * https://github.com/ded/reqwest
	  */
!function(t,e,n){"undefined"!=typeof module&&module.exports?module.exports=n():(__WEBPACK_AMD_DEFINE_FACTORY__=n,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}("reqwest",this,function(){function succeed(t){var e=protocolRe.exec(t.url);return e=e&&e[1]||window.location.protocol,httpsRe.test(e)?twoHundo.test(t.request.status):!!t.request.response}function handleReadyState(t,e,n){return function(){return t._aborted?n(t.request):t._timedOut?n(t.request,"Request is aborted: timeout"):void(t.request&&4==t.request[readyState]&&(t.request.onreadystatechange=noop,succeed(t)?e(t.request):n(t.request)))}}function setHeaders(t,e){var n,r=e.headers||{};r.Accept=r.Accept||defaultHeaders.accept[e.type]||defaultHeaders.accept["*"];var i="function"==typeof FormData&&e.data instanceof FormData;e.crossOrigin||r[requestedWith]||(r[requestedWith]=defaultHeaders.requestedWith),r[contentType]||i||(r[contentType]=e.contentType||defaultHeaders.contentType);for(n in r)r.hasOwnProperty(n)&&"setRequestHeader"in t&&t.setRequestHeader(n,r[n])}function setCredentials(t,e){"undefined"!=typeof e.withCredentials&&"undefined"!=typeof t.withCredentials&&(t.withCredentials=!!e.withCredentials)}function generalCallback(t){lastValue=t}function urlappend(t,e){return t+(/\?/.test(t)?"&":"?")+e}function handleJsonp(t,e,n,r){var i=uniqid++,o=t.jsonpCallback||"callback",s=t.jsonpCallbackName||reqwest.getcallbackPrefix(i),a=new RegExp("((^|\\?|&)"+o+")=([^&]+)"),u=r.match(a),c=doc.createElement("script"),h=0,l=-1!==navigator.userAgent.indexOf("MSIE 10.0");return u?"?"===u[3]?r=r.replace(a,"$1="+s):s=u[3]:r=urlappend(r,o+"="+s),win[s]=generalCallback,c.type="text/javascript",c.src=r,c.async=!0,"undefined"==typeof c.onreadystatechange||l||(c.htmlFor=c.id="_reqwest_"+i),c.onload=c.onreadystatechange=function(){return c[readyState]&&"complete"!==c[readyState]&&"loaded"!==c[readyState]||h?!1:(c.onload=c.onreadystatechange=null,c.onclick&&c.onclick(),e(lastValue),lastValue=void 0,head.removeChild(c),void(h=1))},head.appendChild(c),{abort:function(){c.onload=c.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(c),h=1}}}function getRequest(t,e){var n,r=this.o,i=(r.method||"GET").toUpperCase(),o="string"==typeof r?r:r.url,s=r.processData!==!1&&r.data&&"string"!=typeof r.data?reqwest.toQueryString(r.data):r.data||null,a=!1;return"jsonp"!=r.type&&"GET"!=i||!s||(o=urlappend(o,s),s=null),"jsonp"==r.type?handleJsonp(r,t,e,o):(n=r.xhr&&r.xhr(r)||xhr(r),n.open(i,o,r.async===!1?!1:!0),setHeaders(n,r),setCredentials(n,r),win[xDomainRequest]&&n instanceof win[xDomainRequest]?(n.onload=t,n.onerror=e,n.onprogress=function(){},a=!0):n.onreadystatechange=handleReadyState(this,t,e),r.before&&r.before(n),a?setTimeout(function(){n.send(s)},200):n.send(s),n)}function Reqwest(t,e){this.o=t,this.fn=e,init.apply(this,arguments)}function setType(t){return t.match("json")?"json":t.match("javascript")?"js":t.match("text")?"html":t.match("xml")?"xml":void 0}function init(o,fn){function complete(t){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(t)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(t,e,n){for(t=self.request,self._responseArgs.resp=t,self._responseArgs.msg=e,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(t,e,n);complete(t)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(t,e){return new Reqwest(t,e)}function normalize(t){return t?t.replace(/\r?\n/g,"\r\n"):""}function serial(t,e){var n,r,i,o,s=t.name,a=t.tagName.toLowerCase(),u=function(t){t&&!t.disabled&&e(s,normalize(t.attributes.value&&t.attributes.value.specified?t.value:t.text))};if(!t.disabled&&s)switch(a){case"input":/reset|button|image|file/i.test(t.type)||(n=/checkbox/i.test(t.type),r=/radio/i.test(t.type),i=t.value,(!(n||r)||t.checked)&&e(s,normalize(n&&""===i?"on":i)));break;case"textarea":e(s,normalize(t.value));break;case"select":if("select-one"===t.type.toLowerCase())u(t.selectedIndex>=0?t.options[t.selectedIndex]:null);else for(o=0;t.length&&o<t.length;o++)t.options[o].selected&&u(t.options[o])}}function eachFormElement(){var t,e,n=this,r=function(t,e){var r,i,o;for(r=0;r<e.length;r++)for(o=t[byTag](e[r]),i=0;i<o.length;i++)serial(o[i],n)};for(e=0;e<arguments.length;e++)t=arguments[e],/input|select|textarea/i.test(t.tagName)&&serial(t,n),r(t,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var t={};return eachFormElement.apply(function(e,n){e in t?(t[e]&&!isArray(t[e])&&(t[e]=[t[e]]),t[e].push(n)):t[e]=n},arguments),t}function buildParams(t,e,n,r){var i,o,s,a=/\[\]$/;if(isArray(e))for(o=0;e&&o<e.length;o++)s=e[o],n||a.test(t)?r(t,s):buildParams(t+"["+("object"==typeof s?o:"")+"]",s,n,r);else if(e&&"[object Object]"===e.toString())for(i in e)buildParams(t+"["+i+"]",e[i],n,r);else r(t,e)}var win=window,doc=document,httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(t){return t instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(t){if(t.crossOrigin===!0){var e=win[xmlHttpRequest]?new XMLHttpRequest:null;if(e&&"withCredentials"in e)return e;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(t){return t}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(t,e){return t=t||function(){},e=e||function(){},this._fulfilled?this._responseArgs.resp=t(this._responseArgs.resp):this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(t),this._errorHandlers.push(e)),this},always:function(t){return this._fulfilled||this._erred?t(this._responseArgs.resp):this._completeHandlers.push(t),this},fail:function(t){return this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(t),this},"catch":function(t){return this.fail(t)}},reqwest.serializeArray=function(){var t=[];return eachFormElement.apply(function(e,n){t.push({name:e,value:n})},arguments),t},reqwest.serialize=function(){if(0===arguments.length)return"";var t,e,n=Array.prototype.slice.call(arguments,0);return t=n.pop(),t&&t.nodeType&&n.push(t)&&(t=null),t&&(t=t.type),e="map"==t?serializeHash:"array"==t?reqwest.serializeArray:serializeQueryString,e.apply(null,n)},reqwest.toQueryString=function(t,e){var n,r,i=e||!1,o=[],s=encodeURIComponent,a=function(t,e){e="function"==typeof e?e():null==e?"":e,o[o.length]=s(t)+"="+s(e)};if(isArray(t))for(r=0;t&&r<t.length;r++)a(t[r].name,t[r].value);else for(n in t)t.hasOwnProperty(n)&&buildParams(n,t[n],i,a);return o.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(t,e){return t&&(t.type&&(t.method=t.type)&&delete t.type,t.dataType&&(t.type=t.dataType),t.jsonpCallback&&(t.jsonpCallbackName=t.jsonpCallback)&&delete t.jsonpCallback,t.jsonp&&(t.jsonpCallback=t.jsonp)),new Reqwest(t,e)},reqwest.ajaxSetup=function(t){t=t||{};for(var e in t)globalSetupOptions[e]=t[e]},reqwest})},function(t,e,n){"use strict";function r(t){var e=t.name,n=t.idAttr;return{name:e,dynamicViews:{},init:function(){this.collection=o([])},add:function(t){this.collection=this.collection.push(t),this.trigger("add",this.get())},setCollection:function(t){this.collection=o(t),this.trigger("setCollection",this.get())},destroy:function(t){this.collection=this.collection.filter(function(e){return t!==e[n]}),this.trigger("destroy",t)},destroyAll:function(){this.collection=o(),this.trigger("destroyAll",this.get())},update:function(t){this.collection=this.collection.filter(function(e){return t[n]!==e[n]}),this.collection=this.collection.push(t),this.trigger("update",t)},get:function(t){return t?this.collection.find(function(e){return e[n]===t})||{}:this.collection.toArray()},getCollection:function(t){return this.collection.toArray()}}}var i=n(41),o=i.List;t.exports=r},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){"use strict";function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function e(t){return t.value=!1,t}function n(t){t&&(t.value=!0)}function r(){}function i(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;n>i;i++)r[i]=t[i+e];return r}function o(t){return void 0===t.size&&(t.size=t.__iterate(a)),t.size}function s(t,e){return e>=0?+e:o(t)+ +e}function a(){return!0}function u(t,e,n){return(0===t||void 0!==n&&-n>=t)&&(void 0===e||void 0!==n&&e>=n)}function c(t,e){return l(t,e,0)}function h(t,e){return l(t,e,e)}function l(t,e,n){return void 0===t?n:0>t?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function f(t){return v(t)?t:A(t)}function p(t){return g(t)?t:D(t)}function d(t){return m(t)?t:P(t)}function y(t){return v(t)&&!_(t)?t:T(t)}function v(t){return!(!t||!t[yn])}function g(t){return!(!t||!t[vn])}function m(t){return!(!t||!t[gn])}function _(t){return g(t)||m(t)}function w(t){return!(!t||!t[mn])}function b(t){this.next=t}function x(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function S(){return{value:void 0,done:!0}}function I(t){return!!j(t)}function k(t){return t&&"function"==typeof t.next}function E(t){var e=j(t);return e&&e.call(t)}function j(t){var e=t&&(xn&&t[xn]||t[Sn]);return"function"==typeof e?e:void 0}function O(t){return t&&"number"==typeof t.length}function A(t){return null===t||void 0===t?L():v(t)?t.toSeq():F(t)}function D(t){return null===t||void 0===t?L().toKeyedSeq():v(t)?g(t)?t.toSeq():t.fromEntrySeq():N(t)}function P(t){return null===t||void 0===t?L():v(t)?g(t)?t.entrySeq():t.toIndexedSeq():V(t)}function T(t){return(null===t||void 0===t?L():v(t)?g(t)?t.entrySeq():t:V(t)).toSetSeq()}function C(t){this._array=t,this.size=t.length}function z(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function q(t){this._iterable=t,this.size=t.length||t.size}function M(t){this._iterator=t,this._iteratorCache=[]}function R(t){return!(!t||!t[kn])}function L(){return En||(En=new C([]))}function N(t){var e=Array.isArray(t)?new C(t).fromEntrySeq():k(t)?new M(t).fromEntrySeq():I(t)?new q(t).fromEntrySeq():"object"==typeof t?new z(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function V(t){var e=U(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function F(t){var e=U(t)||"object"==typeof t&&new z(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function U(t){return O(t)?new C(t):k(t)?new M(t):I(t)?new q(t):void 0}function $(t,e,n,r){var i=t._cache;if(i){for(var o=i.length-1,s=0;o>=s;s++){var a=i[n?o-s:s];if(e(a[1],r?a[0]:s,t)===!1)return s+1}return s}return t.__iterateUncached(e,n)}function B(t,e,n,r){var i=t._cache;if(i){var o=i.length-1,s=0;return new b(function(){var t=i[n?o-s:s];return s++>o?S():x(e,r?t[0]:s-1,t[1])})}return t.__iteratorUncached(e,n)}function W(){throw TypeError("Abstract")}function H(){}function K(){}function J(){}function X(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return"function"==typeof t.equals&&"function"==typeof e.equals&&t.equals(e)?!0:!1}function Q(t,e){return e?Y(e,t,"",{"":t}):G(t)}function Y(t,e,n,r){return Array.isArray(e)?t.call(r,n,P(e).map(function(n,r){return Y(t,n,r,e)})):Z(e)?t.call(r,n,D(e).map(function(n,r){return Y(t,n,r,e)})):e}function G(t){return Array.isArray(t)?P(t).map(G).toList():Z(t)?D(t).map(G).toMap():t}function Z(t){return t&&(t.constructor===Object||void 0===t.constructor)}function tt(t){return t>>>1&1073741824|3221225471&t}function et(t){if(t===!1||null===t||void 0===t)return 0;if("function"==typeof t.valueOf&&(t=t.valueOf(),t===!1||null===t||void 0===t))return 0;if(t===!0)return 1;var e=typeof t;if("number"===e){var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)t/=4294967295,n^=t;return tt(n)}return"string"===e?t.length>zn?nt(t):rt(t):"function"==typeof t.hashCode?t.hashCode():it(t)}function nt(t){var e=Rn[t];return void 0===e&&(e=rt(t),Mn===qn&&(Mn=0,Rn={}),Mn++,Rn[t]=e),e}function rt(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return tt(e)}function it(t){var e;if(Pn&&(e=jn.get(t),void 0!==e))return e;if(e=t[Cn],void 0!==e)return e;if(!Dn){if(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Cn],void 0!==e)return e;if(e=ot(t),void 0!==e)return e}if(e=++Tn,1073741824&Tn&&(Tn=0),Pn)jn.set(t,e);else{if(void 0!==An&&An(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Dn)Object.defineProperty(t,Cn,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Cn]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Cn]=e}}return e}function ot(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function st(t,e){if(!t)throw new Error(e)}function at(t){st(t!==1/0,"Cannot perform this action with an infinite size.")}function ut(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function ct(t){this._iter=t,this.size=t.size}function ht(t){this._iter=t,this.size=t.size}function lt(t){this._iter=t,this.size=t.size}function ft(t){var e=Ct(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=zt,e.__iterateUncached=function(e,n){var r=this;return t.__iterate(function(t,n){return e(n,t,r)!==!1},n)},e.__iteratorUncached=function(e,n){if(e===bn){var r=t.__iterator(e,n);return new b(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===wn?_n:wn,n)},e}function pt(t,e,n){var r=Ct(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,fn);return o===fn?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate(function(t,i,s){return r(e.call(n,t,i,s),i,o)!==!1},i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(bn,i);return new b(function(){var i=o.next();if(i.done)return i;var s=i.value,a=s[0];return x(r,a,e.call(n,s[1],a,t),i)})},r}function dt(t,e){var n=Ct(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=ft(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,r){return t.get(e?n:-1-n,r)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=zt,n.__iterate=function(e,n){var r=this;return t.__iterate(function(t,n){return e(t,n,r)},!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function yt(t,e,n,r){var i=Ct(t);return r&&(i.has=function(r){var i=t.get(r,fn);return i!==fn&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,fn);return o!==fn&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var s=this,a=0;return t.__iterate(function(t,o,u){return e.call(n,t,o,u)?(a++,i(t,r?o:a-1,s)):void 0},o),a},i.__iteratorUncached=function(i,o){var s=t.__iterator(bn,o),a=0;return new b(function(){for(;;){var o=s.next();if(o.done)return o;var u=o.value,c=u[0],h=u[1];if(e.call(n,h,c,t))return x(i,r?c:a++,h,o)}})},i}function vt(t,e,n){var r=Rt().asMutable();return t.__iterate(function(i,o){r.update(e.call(n,i,o,t),0,function(t){return t+1})}),r.asImmutable()}function gt(t,e,n){var r=g(t),i=(w(t)?Se():Rt()).asMutable();t.__iterate(function(o,s){i.update(e.call(n,o,s,t),function(t){return t=t||[],t.push(r?[s,o]:o),t})});var o=Tt(t);return i.map(function(e){return At(t,o(e))})}function mt(t,e,n,r){var i=t.size;if(u(e,n,i))return t;var o=c(e,i),a=h(n,i);if(o!==o||a!==a)return mt(t.toSeq().cacheResult(),e,n,r);var l,f=a-o;f===f&&(l=0>f?0:f);var p=Ct(t);return p.size=l,!r&&R(t)&&l>=0&&(p.get=function(e,n){return e=s(this,e),e>=0&&l>e?t.get(e+o,n):n}),p.__iterateUncached=function(e,n){var i=this;if(0===l)return 0;if(n)return this.cacheResult().__iterate(e,n);var s=0,a=!0,u=0;return t.__iterate(function(t,n){return a&&(a=s++<o)?void 0:(u++,e(t,r?n:u-1,i)!==!1&&u!==l)}),u},p.__iteratorUncached=function(e,n){if(0!==l&&n)return this.cacheResult().__iterator(e,n);var i=0!==l&&t.__iterator(e,n),s=0,a=0;return new b(function(){for(;s++<o;)i.next();if(++a>l)return S();var t=i.next();return r||e===wn?t:e===_n?x(e,a-1,void 0,t):x(e,a-1,t.value[1],t)})},p}function _t(t,e,n){var r=Ct(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var s=0;return t.__iterate(function(t,i,a){return e.call(n,t,i,a)&&++s&&r(t,i,o)}),s},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var s=t.__iterator(bn,i),a=!0;return new b(function(){if(!a)return S();var t=s.next();if(t.done)return t;var i=t.value,u=i[0],c=i[1];return e.call(n,c,u,o)?r===bn?t:x(r,u,c,t):(a=!1,S())})},r}function wt(t,e,n,r){var i=Ct(t);return i.__iterateUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterate(i,o);var a=!0,u=0;return t.__iterate(function(t,o,c){return a&&(a=e.call(n,t,o,c))?void 0:(u++,i(t,r?o:u-1,s))}),u},i.__iteratorUncached=function(i,o){var s=this;if(o)return this.cacheResult().__iterator(i,o);var a=t.__iterator(bn,o),u=!0,c=0;return new b(function(){var t,o,h;do{if(t=a.next(),t.done)return r||i===wn?t:i===_n?x(i,c++,void 0,t):x(i,c++,t.value[1],t);var l=t.value;o=l[0],h=l[1],u&&(u=e.call(n,h,o,s))}while(u);return i===bn?t:x(i,o,h,t)})},i}function bt(t,e){var n=g(t),r=[t].concat(e).map(function(t){return v(t)?n&&(t=p(t)):t=n?N(t):V(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===r.length)return t;if(1===r.length){var i=r[0];if(i===t||n&&g(i)||m(t)&&m(i))return i}var o=new C(r);return n?o=o.toKeyedSeq():m(t)||(o=o.toSetSeq()),o=o.flatten(!0),o.size=r.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),o}function xt(t,e,n){var r=Ct(t);return r.__iterateUncached=function(r,i){function o(t,u){var c=this;t.__iterate(function(t,i){return(!e||e>u)&&v(t)?o(t,u+1):r(t,n?i:s++,c)===!1&&(a=!0),!a},i)}var s=0,a=!1;return o(t,0),s},r.__iteratorUncached=function(r,i){var o=t.__iterator(r,i),s=[],a=0;return new b(function(){for(;o;){var t=o.next();if(t.done===!1){var u=t.value;if(r===bn&&(u=u[1]),e&&!(s.length<e)||!v(u))return n?t:x(r,a++,u,t);s.push(o),o=u.__iterator(r,i)}else o=s.pop()}return S()})},r}function St(t,e,n){var r=Tt(t);return t.toSeq().map(function(i,o){return r(e.call(n,i,o,t))}).flatten(!0)}function It(t,e){var n=Ct(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate(function(t,r){return(!o||n(e,o++,i)!==!1)&&n(t,o++,i)!==!1},r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(wn,r),s=0;return new b(function(){return(!i||s%2)&&(i=o.next(),i.done)?i:s%2?x(n,s++,e):x(n,s++,i.value,i)})},n}function kt(t,e,n){e||(e=qt);var r=g(t),i=0,o=t.toSeq().map(function(e,r){return[r,e,i++,n?n(e,r,t):e]}).toArray();return o.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?D(o):m(t)?P(o):T(o)}function Et(t,e,n){if(e||(e=qt),n){var r=t.toSeq().map(function(e,r){return[e,n(e,r,t)]}).reduce(function(t,n){return jt(e,t[1],n[1])?n:t});return r&&r[0]}return t.reduce(function(t,n){return jt(e,t,n)?n:t})}function jt(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(void 0===n||null===n||n!==n)||r>0}function Ot(t,e,n){var r=Ct(t);return r.size=new C(n).map(function(t){return t.size}).min(),r.__iterate=function(t,e){for(var n,r=this.__iterator(wn,e),i=0;!(n=r.next()).done&&t(n.value,i++,this)!==!1;);return i},r.__iteratorUncached=function(t,r){var i=n.map(function(t){return t=f(t),E(r?t.reverse():t)}),o=0,s=!1;return new b(function(){var n;return s||(n=i.map(function(t){return t.next()}),s=n.some(function(t){return t.done})),s?S():x(t,o++,e.apply(null,n.map(function(t){return t.value})))})},r}function At(t,e){return R(t)?e:t.constructor(e)}function Dt(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Pt(t){return at(t.size),o(t)}function Tt(t){return g(t)?p:m(t)?d:y}function Ct(t){return Object.create((g(t)?D:m(t)?P:T).prototype)}function zt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):A.prototype.cacheResult.call(this)}function qt(t,e){return t>e?1:e>t?-1:0}function Mt(t){var e=E(t);if(!e){if(!O(t))throw new TypeError("Expected iterable or array-like: "+t);e=E(f(t))}return e}function Rt(t){return null===t||void 0===t?Jt():Lt(t)?t:Jt().withMutations(function(e){var n=p(t);at(n.size),n.forEach(function(t,n){return e.set(n,t)})})}function Lt(t){return!(!t||!t[Ln])}function Nt(t,e){this.ownerID=t,this.entries=e}function Vt(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function Ft(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function Ut(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function $t(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function Bt(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&Ht(t._root)}function Wt(t,e){return x(t,e[0],e[1])}function Ht(t,e){return{node:t,index:0,__prev:e}}function Kt(t,e,n,r){var i=Object.create(Nn);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Jt(){return Vn||(Vn=Kt(0))}function Xt(t,n,r){var i,o;if(t._root){var s=e(pn),a=e(dn);if(i=Qt(t._root,t.__ownerID,0,void 0,n,r,s,a),!a.value)return t;o=t.size+(s.value?r===fn?-1:1:0)}else{if(r===fn)return t;o=1,i=new Nt(t.__ownerID,[[n,r]])}return t.__ownerID?(t.size=o,t._root=i,t.__hash=void 0,t.__altered=!0,t):i?Kt(o,i):Jt()}function Qt(t,e,r,i,o,s,a,u){return t?t.update(e,r,i,o,s,a,u):s===fn?t:(n(u),n(a),new $t(e,i,[o,s]))}function Yt(t){return t.constructor===$t||t.constructor===Ut}function Gt(t,e,n,r,i){if(t.keyHash===r)return new Ut(e,r,[t.entry,i]);var o,s=(0===n?t.keyHash:t.keyHash>>>n)&ln,a=(0===n?r:r>>>n)&ln,u=s===a?[Gt(t,e,n+cn,r,i)]:(o=new $t(e,r,i),a>s?[t,o]:[o,t]);return new Vt(e,1<<s|1<<a,u)}function Zt(t,e,n,i){t||(t=new r);for(var o=new $t(t,et(n),[n,i]),s=0;s<e.length;s++){var a=e[s];o=o.update(t,0,void 0,a[0],a[1])}return o}function te(t,e,n,r){for(var i=0,o=0,s=new Array(n),a=0,u=1,c=e.length;c>a;a++,u<<=1){var h=e[a];void 0!==h&&a!==r&&(i|=u,s[o++]=h)}return new Vt(t,i,s)}function ee(t,e,n,r,i){for(var o=0,s=new Array(hn),a=0;0!==n;a++,n>>>=1)s[a]=1&n?e[o++]:void 0;return s[r]=i,new Ft(t,o+1,s)}function ne(t,e,n){for(var r=[],i=0;i<n.length;i++){var o=n[i],s=p(o);v(o)||(s=s.map(function(t){return Q(t)})),r.push(s)}return ie(t,e,r)}function re(t){return function(e,n,r){return e&&e.mergeDeepWith&&v(n)?e.mergeDeepWith(t,n):t?t(e,n,r):n}}function ie(t,e,n){return n=n.filter(function(t){return 0!==t.size}),0===n.length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations(function(t){for(var r=e?function(n,r){t.update(r,fn,function(t){return t===fn?n:e(t,n,r)})}:function(e,n){t.set(n,e)},i=0;i<n.length;i++)n[i].forEach(r)}):t.constructor(n[0])}function oe(t,e,n,r){var i=t===fn,o=e.next();if(o.done){var s=i?n:t,a=r(s);return a===s?t:a}st(i||t&&t.set,"invalid keyPath");var u=o.value,c=i?fn:t.get(u,fn),h=oe(c,e,n,r);return h===c?t:h===fn?t.remove(u):(i?Jt():t).set(u,h)}function se(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,127&t}function ae(t,e,n,r){var o=r?t:i(t);return o[e]=n,o}function ue(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),s=0,a=0;i>a;a++)a===e?(o[a]=n,s=-1):o[a]=t[a+s];return o}function ce(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,s=0;r>s;s++)s===e&&(o=1),i[s]=t[s+o];return i}function he(t){var e=ye();if(null===t||void 0===t)return e;if(le(t))return t;var n=d(t),r=n.size;return 0===r?e:(at(r),r>0&&hn>r?de(0,r,cn,null,new fe(n.toArray())):e.withMutations(function(t){t.setSize(r),n.forEach(function(e,n){return t.set(n,e)})}))}function le(t){return!(!t||!t[Bn])}function fe(t,e){this.array=t,this.ownerID=e}function pe(t,e){function n(t,e,n){return 0===e?r(t,n):i(t,e,n)}function r(t,n){var r=n===a?u&&u.array:t&&t.array,i=n>o?0:o-n,c=s-n;return c>hn&&(c=hn),function(){if(i===c)return Kn;var t=e?--c:i++;return r&&r[t]}}function i(t,r,i){var a,u=t&&t.array,c=i>o?0:o-i>>r,h=(s-i>>r)+1;return h>hn&&(h=hn),function(){for(;;){if(a){var t=a();if(t!==Kn)return t;a=null}if(c===h)return Kn;var o=e?--h:c++;a=n(u&&u[o],r-cn,i+(o<<r))}}}var o=t._origin,s=t._capacity,a=xe(s),u=t._tail;return n(t._root,t._level,0)}function de(t,e,n,r,i,o,s){var a=Object.create(Wn);return a.size=e-t,a._origin=t,a._capacity=e,a._level=n,a._root=r,a._tail=i,a.__ownerID=o,a.__hash=s,a.__altered=!1,a}function ye(){return Hn||(Hn=de(0,0,cn))}function ve(t,n,r){if(n=s(t,n),n>=t.size||0>n)return t.withMutations(function(t){0>n?we(t,n).set(0,r):we(t,0,n+1).set(n,r)});n+=t._origin;var i=t._tail,o=t._root,a=e(dn);return n>=xe(t._capacity)?i=ge(i,t.__ownerID,0,n,r,a):o=ge(o,t.__ownerID,t._level,n,r,a),a.value?t.__ownerID?(t._root=o,t._tail=i,t.__hash=void 0,t.__altered=!0,t):de(t._origin,t._capacity,t._level,o,i):t}function ge(t,e,r,i,o,s){var a=i>>>r&ln,u=t&&a<t.array.length;if(!u&&void 0===o)return t;var c;if(r>0){var h=t&&t.array[a],l=ge(h,e,r-cn,i,o,s);return l===h?t:(c=me(t,e),c.array[a]=l,c)}return u&&t.array[a]===o?t:(n(s),c=me(t,e),void 0===o&&a===c.array.length-1?c.array.pop():c.array[a]=o,c)}function me(t,e){return e&&t&&e===t.ownerID?t:new fe(t?t.array.slice():[],e)}function _e(t,e){if(e>=xe(t._capacity))return t._tail;if(e<1<<t._level+cn){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&ln],r-=cn;return n}}function we(t,e,n){var i=t.__ownerID||new r,o=t._origin,s=t._capacity,a=o+e,u=void 0===n?s:0>n?s+n:o+n;if(a===o&&u===s)return t;if(a>=u)return t.clear();for(var c=t._level,h=t._root,l=0;0>a+l;)h=new fe(h&&h.array.length?[void 0,h]:[],i),c+=cn,l+=1<<c;l&&(a+=l,o+=l,u+=l,s+=l);for(var f=xe(s),p=xe(u);p>=1<<c+cn;)h=new fe(h&&h.array.length?[h]:[],i),c+=cn;var d=t._tail,y=f>p?_e(t,u-1):p>f?new fe([],i):d;if(d&&p>f&&s>a&&d.array.length){h=me(h,i);for(var v=h,g=c;g>cn;g-=cn){var m=f>>>g&ln;v=v.array[m]=me(v.array[m],i)}v.array[f>>>cn&ln]=d}if(s>u&&(y=y&&y.removeAfter(i,0,u)),a>=p)a-=p,u-=p,c=cn,h=null,y=y&&y.removeBefore(i,0,a);else if(a>o||f>p){for(l=0;h;){var _=a>>>c&ln;if(_!==p>>>c&ln)break;_&&(l+=(1<<c)*_),c-=cn,h=h.array[_]}h&&a>o&&(h=h.removeBefore(i,c,a-l)),h&&f>p&&(h=h.removeAfter(i,c,p-l)),l&&(a-=l,u-=l)}return t.__ownerID?(t.size=u-a,t._origin=a,t._capacity=u,t._level=c,t._root=h,t._tail=y,t.__hash=void 0,t.__altered=!0,t):de(a,u,c,h,y)}function be(t,e,n){for(var r=[],i=0,o=0;o<n.length;o++){var s=n[o],a=d(s);a.size>i&&(i=a.size),v(s)||(a=a.map(function(t){return Q(t)})),r.push(a)}return i>t.size&&(t=t.setSize(i)),ie(t,e,r)}function xe(t){return hn>t?0:t-1>>>cn<<cn}function Se(t){return null===t||void 0===t?Ee():Ie(t)?t:Ee().withMutations(function(e){var n=p(t);at(n.size),n.forEach(function(t,n){return e.set(n,t)})})}function Ie(t){return Lt(t)&&w(t)}function ke(t,e,n,r){var i=Object.create(Se.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function Ee(){return Jn||(Jn=ke(Jt(),ye()))}function je(t,e,n){var r,i,o=t._map,s=t._list,a=o.get(e),u=void 0!==a;if(n===fn){if(!u)return t;s.size>=hn&&s.size>=2*o.size?(i=s.filter(function(t,e){return void 0!==t&&a!==e}),r=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=a===s.size-1?s.pop():s.set(a,void 0))}else if(u){if(n===s.get(a)[1])return t;r=o,i=s.set(a,[e,n])}else r=o.set(e,s.size),i=s.set(s.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t):ke(r,i)}function Oe(t){return null===t||void 0===t?Pe():Ae(t)?t:Pe().unshiftAll(t)}function Ae(t){return!(!t||!t[Xn])}function De(t,e,n,r){var i=Object.create(Qn);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Pe(){return Yn||(Yn=De(0))}function Te(t){return null===t||void 0===t?Me():Ce(t)?t:Me().withMutations(function(e){var n=y(t);at(n.size),n.forEach(function(t){return e.add(t)})})}function Ce(t){return!(!t||!t[Gn])}function ze(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function qe(t,e){var n=Object.create(Zn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Me(){return tr||(tr=qe(Jt()))}function Re(t){return null===t||void 0===t?Ve():Le(t)?t:Ve().withMutations(function(e){var n=y(t);at(n.size),n.forEach(function(t){return e.add(t)})})}function Le(t){return Ce(t)&&w(t)}function Ne(t,e){var n=Object.create(er);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Ve(){return nr||(nr=Ne(Ee()))}function Fe(t,e){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var s=Object.keys(t);Be(i,s),i.size=s.length,i._name=e,i._keys=s,i._defaultValues=t}this._map=Rt(o)},i=r.prototype=Object.create(rr);return i.constructor=r,r}function Ue(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._map=e,r.__ownerID=n,r}function $e(t){return t._name||t.constructor.name||"Record";
}function Be(t,e){try{e.forEach(We.bind(void 0,t))}catch(n){}}function We(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){st(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function He(t,e){if(t===e)return!0;if(!v(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||g(t)!==g(e)||m(t)!==m(e)||w(t)!==w(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!_(t);if(w(t)){var r=t.entries();return e.every(function(t,e){var i=r.next().value;return i&&X(i[1],t)&&(n||X(i[0],e))})&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var s=!0,a=e.__iterate(function(e,r){return(n?t.has(e):i?X(e,t.get(r,fn)):X(t.get(r,fn),e))?void 0:(s=!1,!1)});return s&&t.size===a}function Ke(t,e,n){if(!(this instanceof Ke))return new Ke(t,e,n);if(st(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),t>e&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(ir)return ir;ir=this}}function Je(t,e){if(!(this instanceof Je))return new Je(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(or)return or;or=this}}function Xe(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function Qe(t,e){return e}function Ye(t,e){return[e,t]}function Ge(t){return function(){return!t.apply(this,arguments)}}function Ze(t){return function(){return-t.apply(this,arguments)}}function tn(t){return"string"==typeof t?JSON.stringify(t):t}function en(){return i(arguments)}function nn(t,e){return e>t?1:t>e?-1:0}function rn(t){if(t.size===1/0)return 0;var e=w(t),n=g(t),r=e?1:0,i=t.__iterate(n?e?function(t,e){r=31*r+sn(et(t),et(e))|0}:function(t,e){r=r+sn(et(t),et(e))|0}:e?function(t){r=31*r+et(t)|0}:function(t){r=r+et(t)|0});return on(i,r)}function on(t,e){return e=On(e,3432918353),e=On(e<<15|e>>>-15,461845907),e=On(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=On(e^e>>>16,2246822507),e=On(e^e>>>13,3266489909),e=tt(e^e>>>16)}function sn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var an=Array.prototype.slice,un="delete",cn=5,hn=1<<cn,ln=hn-1,fn={},pn={value:!1},dn={value:!1};t(p,f),t(d,f),t(y,f),f.isIterable=v,f.isKeyed=g,f.isIndexed=m,f.isAssociative=_,f.isOrdered=w,f.Keyed=p,f.Indexed=d,f.Set=y;var yn="@@__IMMUTABLE_ITERABLE__@@",vn="@@__IMMUTABLE_KEYED__@@",gn="@@__IMMUTABLE_INDEXED__@@",mn="@@__IMMUTABLE_ORDERED__@@",_n=0,wn=1,bn=2,xn="function"==typeof Symbol&&Symbol.iterator,Sn="@@iterator",In=xn||Sn;b.prototype.toString=function(){return"[Iterator]"},b.KEYS=_n,b.VALUES=wn,b.ENTRIES=bn,b.prototype.inspect=b.prototype.toSource=function(){return this.toString()},b.prototype[In]=function(){return this},t(A,f),A.of=function(){return A(arguments)},A.prototype.toSeq=function(){return this},A.prototype.toString=function(){return this.__toString("Seq {","}")},A.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},A.prototype.__iterate=function(t,e){return $(this,t,e,!0)},A.prototype.__iterator=function(t,e){return B(this,t,e,!0)},t(D,A),D.prototype.toKeyedSeq=function(){return this},t(P,A),P.of=function(){return P(arguments)},P.prototype.toIndexedSeq=function(){return this},P.prototype.toString=function(){return this.__toString("Seq [","]")},P.prototype.__iterate=function(t,e){return $(this,t,e,!1)},P.prototype.__iterator=function(t,e){return B(this,t,e,!1)},t(T,A),T.of=function(){return T(arguments)},T.prototype.toSetSeq=function(){return this},A.isSeq=R,A.Keyed=D,A.Set=T,A.Indexed=P;var kn="@@__IMMUTABLE_SEQ__@@";A.prototype[kn]=!0,t(C,P),C.prototype.get=function(t,e){return this.has(t)?this._array[s(this,t)]:e},C.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length-1,i=0;r>=i;i++)if(t(n[e?r-i:i],i,this)===!1)return i+1;return i},C.prototype.__iterator=function(t,e){var n=this._array,r=n.length-1,i=0;return new b(function(){return i>r?S():x(t,i,n[e?r-i++:i++])})},t(z,D),z.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},z.prototype.has=function(t){return this._object.hasOwnProperty(t)},z.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length-1,o=0;i>=o;o++){var s=r[e?i-o:o];if(t(n[s],s,this)===!1)return o+1}return o},z.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length-1,o=0;return new b(function(){var s=r[e?i-o:o];return o++>i?S():x(t,s,n[s])})},z.prototype[mn]=!0,t(q,P),q.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=this._iterable,r=E(n),i=0;if(k(r))for(var o;!(o=r.next()).done&&t(o.value,i++,this)!==!1;);return i},q.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterable,r=E(n);if(!k(r))return new b(S);var i=0;return new b(function(){var e=r.next();return e.done?e:x(t,i++,e.value)})},t(M,P),M.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n=this._iterator,r=this._iteratorCache,i=0;i<r.length;)if(t(r[i],i++,this)===!1)return i;for(var o;!(o=n.next()).done;){var s=o.value;if(r[i]=s,t(s,i++,this)===!1)break}return i},M.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,r=this._iteratorCache,i=0;return new b(function(){if(i>=r.length){var e=n.next();if(e.done)return e;r[i]=e.value}return x(t,i,r[i++])})};var En;t(W,f),t(H,W),t(K,W),t(J,W),W.Keyed=H,W.Indexed=K,W.Set=J;var jn,On="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){t=0|t,e=0|e;var n=65535&t,r=65535&e;return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0},An=Object.isExtensible,Dn=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),Pn="function"==typeof WeakMap;Pn&&(jn=new WeakMap);var Tn=0,Cn="__immutablehash__";"function"==typeof Symbol&&(Cn=Symbol(Cn));var zn=16,qn=255,Mn=0,Rn={};t(ut,D),ut.prototype.get=function(t,e){return this._iter.get(t,e)},ut.prototype.has=function(t){return this._iter.has(t)},ut.prototype.valueSeq=function(){return this._iter.valueSeq()},ut.prototype.reverse=function(){var t=this,e=dt(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},ut.prototype.map=function(t,e){var n=this,r=pt(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},ut.prototype.__iterate=function(t,e){var n,r=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,r)}:(n=e?Pt(this):0,function(i){return t(i,e?--n:n++,r)}),e)},ut.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(wn,e),r=e?Pt(this):0;return new b(function(){var i=n.next();return i.done?i:x(t,e?--r:r++,i.value,i)})},ut.prototype[mn]=!0,t(ct,P),ct.prototype.includes=function(t){return this._iter.includes(t)},ct.prototype.__iterate=function(t,e){var n=this,r=0;return this._iter.__iterate(function(e){return t(e,r++,n)},e)},ct.prototype.__iterator=function(t,e){var n=this._iter.__iterator(wn,e),r=0;return new b(function(){var e=n.next();return e.done?e:x(t,r++,e.value,e)})},t(ht,T),ht.prototype.has=function(t){return this._iter.includes(t)},ht.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},ht.prototype.__iterator=function(t,e){var n=this._iter.__iterator(wn,e);return new b(function(){var e=n.next();return e.done?e:x(t,e.value,e.value,e)})},t(lt,D),lt.prototype.entrySeq=function(){return this._iter.toSeq()},lt.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){Dt(e);var r=v(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}},e)},lt.prototype.__iterator=function(t,e){var n=this._iter.__iterator(wn,e);return new b(function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){Dt(r);var i=v(r);return x(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}})},ct.prototype.cacheResult=ut.prototype.cacheResult=ht.prototype.cacheResult=lt.prototype.cacheResult=zt,t(Rt,H),Rt.prototype.toString=function(){return this.__toString("Map {","}")},Rt.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},Rt.prototype.set=function(t,e){return Xt(this,t,e)},Rt.prototype.setIn=function(t,e){return this.updateIn(t,fn,function(){return e})},Rt.prototype.remove=function(t){return Xt(this,t,fn)},Rt.prototype.deleteIn=function(t){return this.updateIn(t,function(){return fn})},Rt.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},Rt.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var r=oe(this,Mt(t),e,n);return r===fn?void 0:r},Rt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Jt()},Rt.prototype.merge=function(){return ne(this,void 0,arguments)},Rt.prototype.mergeWith=function(t){var e=an.call(arguments,1);return ne(this,t,e)},Rt.prototype.mergeIn=function(t){var e=an.call(arguments,1);return this.updateIn(t,Jt(),function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1]})},Rt.prototype.mergeDeep=function(){return ne(this,re(void 0),arguments)},Rt.prototype.mergeDeepWith=function(t){var e=an.call(arguments,1);return ne(this,re(t),e)},Rt.prototype.mergeDeepIn=function(t){var e=an.call(arguments,1);return this.updateIn(t,Jt(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]})},Rt.prototype.sort=function(t){return Se(kt(this,t))},Rt.prototype.sortBy=function(t,e){return Se(kt(this,e,t))},Rt.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},Rt.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new r)},Rt.prototype.asImmutable=function(){return this.__ensureOwner()},Rt.prototype.wasAltered=function(){return this.__altered},Rt.prototype.__iterator=function(t,e){return new Bt(this,t,e)},Rt.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate(function(e){return r++,t(e[1],e[0],n)},e),r},Rt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Kt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Rt.isMap=Lt;var Ln="@@__IMMUTABLE_MAP__@@",Nn=Rt.prototype;Nn[Ln]=!0,Nn[un]=Nn.remove,Nn.removeIn=Nn.deleteIn,Nt.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,s=i.length;s>o;o++)if(X(n,i[o][0]))return i[o][1];return r},Nt.prototype.update=function(t,e,r,o,s,a,u){for(var c=s===fn,h=this.entries,l=0,f=h.length;f>l&&!X(o,h[l][0]);l++);var p=f>l;if(p?h[l][1]===s:c)return this;if(n(u),(c||!p)&&n(a),!c||1!==h.length){if(!p&&!c&&h.length>=Fn)return Zt(t,h,o,s);var d=t&&t===this.ownerID,y=d?h:i(h);return p?c?l===f-1?y.pop():y[l]=y.pop():y[l]=[o,s]:y.push([o,s]),d?(this.entries=y,this):new Nt(t,y)}},Vt.prototype.get=function(t,e,n,r){void 0===e&&(e=et(n));var i=1<<((0===t?e:e>>>t)&ln),o=this.bitmap;return 0===(o&i)?r:this.nodes[se(o&i-1)].get(t+cn,e,n,r)},Vt.prototype.update=function(t,e,n,r,i,o,s){void 0===n&&(n=et(r));var a=(0===e?n:n>>>e)&ln,u=1<<a,c=this.bitmap,h=0!==(c&u);if(!h&&i===fn)return this;var l=se(c&u-1),f=this.nodes,p=h?f[l]:void 0,d=Qt(p,t,e+cn,n,r,i,o,s);if(d===p)return this;if(!h&&d&&f.length>=Un)return ee(t,f,c,a,d);if(h&&!d&&2===f.length&&Yt(f[1^l]))return f[1^l];if(h&&d&&1===f.length&&Yt(d))return d;var y=t&&t===this.ownerID,v=h?d?c:c^u:c|u,g=h?d?ae(f,l,d,y):ce(f,l,y):ue(f,l,d,y);return y?(this.bitmap=v,this.nodes=g,this):new Vt(t,v,g)},Ft.prototype.get=function(t,e,n,r){void 0===e&&(e=et(n));var i=(0===t?e:e>>>t)&ln,o=this.nodes[i];return o?o.get(t+cn,e,n,r):r},Ft.prototype.update=function(t,e,n,r,i,o,s){void 0===n&&(n=et(r));var a=(0===e?n:n>>>e)&ln,u=i===fn,c=this.nodes,h=c[a];if(u&&!h)return this;var l=Qt(h,t,e+cn,n,r,i,o,s);if(l===h)return this;var f=this.count;if(h){if(!l&&(f--,$n>f))return te(t,c,f,a)}else f++;var p=t&&t===this.ownerID,d=ae(c,a,l,p);return p?(this.count=f,this.nodes=d,this):new Ft(t,f,d)},Ut.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,s=i.length;s>o;o++)if(X(n,i[o][0]))return i[o][1];return r},Ut.prototype.update=function(t,e,r,o,s,a,u){void 0===r&&(r=et(o));var c=s===fn;if(r!==this.keyHash)return c?this:(n(u),n(a),Gt(this,t,e,r,[o,s]));for(var h=this.entries,l=0,f=h.length;f>l&&!X(o,h[l][0]);l++);var p=f>l;if(p?h[l][1]===s:c)return this;if(n(u),(c||!p)&&n(a),c&&2===f)return new $t(t,this.keyHash,h[1^l]);var d=t&&t===this.ownerID,y=d?h:i(h);return p?c?l===f-1?y.pop():y[l]=y.pop():y[l]=[o,s]:y.push([o,s]),d?(this.entries=y,this):new Ut(t,this.keyHash,y)},$t.prototype.get=function(t,e,n,r){return X(n,this.entry[0])?this.entry[1]:r},$t.prototype.update=function(t,e,r,i,o,s,a){var u=o===fn,c=X(i,this.entry[0]);return(c?o===this.entry[1]:u)?this:(n(a),u?void n(s):c?t&&t===this.ownerID?(this.entry[1]=o,this):new $t(t,this.keyHash,[i,o]):(n(s),Gt(this,t,e,et(i),[i,o])))},Nt.prototype.iterate=Ut.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;i>=r;r++)if(t(n[e?i-r:r])===!1)return!1},Vt.prototype.iterate=Ft.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;i>=r;r++){var o=n[e?i-r:r];if(o&&o.iterate(t,e)===!1)return!1}},$t.prototype.iterate=function(t,e){return t(this.entry)},t(Bt,b),Bt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,r=e.node,i=e.index++;if(r.entry){if(0===i)return Wt(t,r.entry)}else if(r.entries){if(n=r.entries.length-1,n>=i)return Wt(t,r.entries[this._reverse?n-i:i])}else if(n=r.nodes.length-1,n>=i){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return Wt(t,o.entry);e=this._stack=Ht(o,e)}continue}e=this._stack=this._stack.__prev}return S()};var Vn,Fn=hn/4,Un=hn/2,$n=hn/4;t(he,K),he.of=function(){return this(arguments)},he.prototype.toString=function(){return this.__toString("List [","]")},he.prototype.get=function(t,e){if(t=s(this,t),0>t||t>=this.size)return e;t+=this._origin;var n=_e(this,t);return n&&n.array[t&ln]},he.prototype.set=function(t,e){return ve(this,t,e)},he.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},he.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=cn,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):ye()},he.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){we(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])})},he.prototype.pop=function(){return we(this,0,-1)},he.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){we(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},he.prototype.shift=function(){return we(this,1)},he.prototype.merge=function(){return be(this,void 0,arguments)},he.prototype.mergeWith=function(t){var e=an.call(arguments,1);return be(this,t,e)},he.prototype.mergeDeep=function(){return be(this,re(void 0),arguments)},he.prototype.mergeDeepWith=function(t){var e=an.call(arguments,1);return be(this,re(t),e)},he.prototype.setSize=function(t){return we(this,0,t)},he.prototype.slice=function(t,e){var n=this.size;return u(t,e,n)?this:we(this,c(t,n),h(e,n))},he.prototype.__iterator=function(t,e){var n=0,r=pe(this,e);return new b(function(){var e=r();return e===Kn?S():x(t,n++,e)})},he.prototype.__iterate=function(t,e){for(var n,r=0,i=pe(this,e);(n=i())!==Kn&&t(n,r++,this)!==!1;);return r},he.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?de(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},he.isList=le;var Bn="@@__IMMUTABLE_LIST__@@",Wn=he.prototype;Wn[Bn]=!0,Wn[un]=Wn.remove,Wn.setIn=Nn.setIn,Wn.deleteIn=Wn.removeIn=Nn.removeIn,Wn.update=Nn.update,Wn.updateIn=Nn.updateIn,Wn.mergeIn=Nn.mergeIn,Wn.mergeDeepIn=Nn.mergeDeepIn,Wn.withMutations=Nn.withMutations,Wn.asMutable=Nn.asMutable,Wn.asImmutable=Nn.asImmutable,Wn.wasAltered=Nn.wasAltered,fe.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0||0===this.array.length)return this;var r=n>>>e&ln;if(r>=this.array.length)return new fe([],t);var i,o=0===r;if(e>0){var s=this.array[r];if(i=s&&s.removeBefore(t,e-cn,n),i===s&&o)return this}if(o&&!i)return this;var a=me(this,t);if(!o)for(var u=0;r>u;u++)a.array[u]=void 0;return i&&(a.array[r]=i),a},fe.prototype.removeAfter=function(t,e,n){if(n===e?1<<e:0||0===this.array.length)return this;var r=n-1>>>e&ln;if(r>=this.array.length)return this;var i,o=r===this.array.length-1;if(e>0){var s=this.array[r];if(i=s&&s.removeAfter(t,e-cn,n),i===s&&o)return this}if(o&&!i)return this;var a=me(this,t);return o||a.array.pop(),i&&(a.array[r]=i),a};var Hn,Kn={};t(Se,Rt),Se.of=function(){return this(arguments)},Se.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Se.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},Se.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Ee()},Se.prototype.set=function(t,e){return je(this,t,e)},Se.prototype.remove=function(t){return je(this,t,fn)},Se.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Se.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},Se.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Se.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?ke(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},Se.isOrderedMap=Ie,Se.prototype[mn]=!0,Se.prototype[un]=Se.prototype.remove;var Jn;t(Oe,K),Oe.of=function(){return this(arguments)},Oe.prototype.toString=function(){return this.__toString("Stack [","]")},Oe.prototype.get=function(t,e){var n=this._head;for(t=s(this,t);n&&t--;)n=n.next;return n?n.value:e},Oe.prototype.peek=function(){return this._head&&this._head.value},Oe.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):De(t,e)},Oe.prototype.pushAll=function(t){if(t=d(t),0===t.size)return this;at(t.size);var e=this.size,n=this._head;return t.reverse().forEach(function(t){e++,n={value:t,next:n}}),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):De(e,n)},Oe.prototype.pop=function(){return this.slice(1)},Oe.prototype.unshift=function(){return this.push.apply(this,arguments)},Oe.prototype.unshiftAll=function(t){return this.pushAll(t)},Oe.prototype.shift=function(){return this.pop.apply(this,arguments)},Oe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Pe()},Oe.prototype.slice=function(t,e){if(u(t,e,this.size))return this;var n=c(t,this.size),r=h(e,this.size);if(r!==this.size)return K.prototype.slice.call(this,t,e);for(var i=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):De(i,o)},Oe.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?De(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Oe.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,r=this._head;r&&t(r.value,n++,this)!==!1;)r=r.next;return n},Oe.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,r=this._head;return new b(function(){if(r){var e=r.value;return r=r.next,x(t,n++,e)}return S()})},Oe.isStack=Ae;var Xn="@@__IMMUTABLE_STACK__@@",Qn=Oe.prototype;Qn[Xn]=!0,Qn.withMutations=Nn.withMutations,Qn.asMutable=Nn.asMutable,Qn.asImmutable=Nn.asImmutable,Qn.wasAltered=Nn.wasAltered;var Yn;t(Te,J),Te.of=function(){return this(arguments)},Te.fromKeys=function(t){return this(p(t).keySeq())},Te.prototype.toString=function(){return this.__toString("Set {","}")},Te.prototype.has=function(t){return this._map.has(t)},Te.prototype.add=function(t){return ze(this,this._map.set(t,!0))},Te.prototype.remove=function(t){return ze(this,this._map.remove(t))},Te.prototype.clear=function(){return ze(this,this._map.clear())},Te.prototype.union=function(){var t=an.call(arguments,0);return t=t.filter(function(t){return 0!==t.size}),0===t.length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var n=0;n<t.length;n++)y(t[n]).forEach(function(t){return e.add(t)})}):this.constructor(t[0])},Te.prototype.intersect=function(){var t=an.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return y(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.every(function(t){return t.includes(e)})||n.remove(e)})})},Te.prototype.subtract=function(){var t=an.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return y(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.some(function(t){return t.includes(e)})&&n.remove(e)})})},Te.prototype.merge=function(){return this.union.apply(this,arguments)},Te.prototype.mergeWith=function(t){var e=an.call(arguments,1);return this.union.apply(this,e)},Te.prototype.sort=function(t){return Re(kt(this,t))},Te.prototype.sortBy=function(t,e){return Re(kt(this,e,t))},Te.prototype.wasAltered=function(){return this._map.wasAltered()},Te.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e,r){return t(r,r,n)},e)},Te.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},Te.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},Te.isSet=Ce;var Gn="@@__IMMUTABLE_SET__@@",Zn=Te.prototype;Zn[Gn]=!0,Zn[un]=Zn.remove,Zn.mergeDeep=Zn.merge,Zn.mergeDeepWith=Zn.mergeWith,Zn.withMutations=Nn.withMutations,Zn.asMutable=Nn.asMutable,Zn.asImmutable=Nn.asImmutable,Zn.__empty=Me,Zn.__make=qe;var tr;t(Re,Te),Re.of=function(){return this(arguments)},Re.fromKeys=function(t){return this(p(t).keySeq())},Re.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Re.isOrderedSet=Le;var er=Re.prototype;er[mn]=!0,er.__empty=Ve,er.__make=Ne;var nr;t(Fe,H),Fe.prototype.toString=function(){return this.__toString($e(this)+" {","}")},Fe.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Fe.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},Fe.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=Ue(this,Jt()))},Fe.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+$e(this));var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:Ue(this,n)},Fe.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:Ue(this,e)},Fe.prototype.wasAltered=function(){return this._map.wasAltered()},Fe.prototype.__iterator=function(t,e){var n=this;return p(this._defaultValues).map(function(t,e){return n.get(e)}).__iterator(t,e)},Fe.prototype.__iterate=function(t,e){var n=this;return p(this._defaultValues).map(function(t,e){return n.get(e)}).__iterate(t,e)},Fe.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?Ue(this,e,t):(this.__ownerID=t,this._map=e,this)};var rr=Fe.prototype;rr[un]=rr.remove,rr.deleteIn=rr.removeIn=Nn.removeIn,rr.merge=Nn.merge,rr.mergeWith=Nn.mergeWith,rr.mergeIn=Nn.mergeIn,rr.mergeDeep=Nn.mergeDeep,rr.mergeDeepWith=Nn.mergeDeepWith,rr.mergeDeepIn=Nn.mergeDeepIn,rr.setIn=Nn.setIn,rr.update=Nn.update,rr.updateIn=Nn.updateIn,rr.withMutations=Nn.withMutations,rr.asMutable=Nn.asMutable,rr.asImmutable=Nn.asImmutable,t(Ke,P),Ke.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},Ke.prototype.get=function(t,e){return this.has(t)?this._start+s(this,t)*this._step:e},Ke.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},Ke.prototype.slice=function(t,e){return u(t,e,this.size)?this:(t=c(t,this.size),e=h(e,this.size),t>=e?new Ke(0,0):new Ke(this.get(t,this._end),this.get(e,this._end),this._step))},Ke.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step===0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},Ke.prototype.lastIndexOf=function(t){return this.indexOf(t)},Ke.prototype.__iterate=function(t,e){for(var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;n>=o;o++){if(t(i,o,this)===!1)return o+1;i+=e?-r:r}return o},Ke.prototype.__iterator=function(t,e){var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;return new b(function(){var s=i;return i+=e?-r:r,o>n?S():x(t,o++,s)})},Ke.prototype.equals=function(t){return t instanceof Ke?this._start===t._start&&this._end===t._end&&this._step===t._step:He(this,t)};var ir;t(Je,P),Je.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Je.prototype.get=function(t,e){return this.has(t)?this._value:e},Je.prototype.includes=function(t){return X(this._value,t)},Je.prototype.slice=function(t,e){var n=this.size;return u(t,e,n)?this:new Je(this._value,h(e,n)-c(t,n))},Je.prototype.reverse=function(){return this},Je.prototype.indexOf=function(t){return X(this._value,t)?0:-1},Je.prototype.lastIndexOf=function(t){return X(this._value,t)?this.size:-1},Je.prototype.__iterate=function(t,e){for(var n=0;n<this.size;n++)if(t(this._value,n,this)===!1)return n+1;return n},Je.prototype.__iterator=function(t,e){var n=this,r=0;return new b(function(){return r<n.size?x(t,r++,n._value):S()})},Je.prototype.equals=function(t){return t instanceof Je?X(this._value,t._value):He(t)};var or;f.Iterator=b,Xe(f,{toArray:function(){at(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,n){t[n]=e}),t},toIndexedSeq:function(){return new ct(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new ut(this,!0)},toMap:function(){return Rt(this.toKeyedSeq())},toObject:function(){at(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t},toOrderedMap:function(){return Se(this.toKeyedSeq())},toOrderedSet:function(){return Re(g(this)?this.valueSeq():this)},toSet:function(){return Te(g(this)?this.valueSeq():this)},toSetSeq:function(){return new ht(this)},toSeq:function(){return m(this)?this.toIndexedSeq():g(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Oe(g(this)?this.valueSeq():this)},toList:function(){return he(g(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var t=an.call(arguments,0);return At(this,bt(this,t))},contains:function(t){return this.includes(t)},includes:function(t){return this.some(function(e){return X(e,t)})},entries:function(){return this.__iterator(bn)},every:function(t,e){at(this.size);var n=!0;return this.__iterate(function(r,i,o){return t.call(e,r,i,o)?void 0:(n=!1,!1)}),n},filter:function(t,e){return At(this,yt(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},findEntry:function(t,e){var n;return this.__iterate(function(r,i,o){return t.call(e,r,i,o)?(n=[i,r],!1):void 0}),n},findLastEntry:function(t,e){return this.toSeq().reverse().findEntry(t,e)},forEach:function(t,e){return at(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){at(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(r){n?n=!1:e+=t,e+=null!==r&&void 0!==r?r.toString():""}),e},keys:function(){return this.__iterator(_n)},map:function(t,e){return At(this,pt(this,t,e))},reduce:function(t,e,n){at(this.size);var r,i;return arguments.length<2?i=!0:r=e,this.__iterate(function(e,o,s){i?(i=!1,r=e):r=t.call(n,r,e,o,s)}),r},reduceRight:function(t,e,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return At(this,dt(this,!0))},slice:function(t,e){return At(this,mt(this,t,e,!0))},some:function(t,e){return!this.every(Ge(t),e)},sort:function(t){return At(this,kt(this,t))},values:function(){return this.__iterator(wn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return o(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return vt(this,t,e)},equals:function(t){return He(this,t)},entrySeq:function(){var t=this;if(t._cache)return new C(t._cache);var e=t.toSeq().map(Ye).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Ge(t),e)},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},first:function(){return this.find(a)},flatMap:function(t,e){return At(this,St(this,t,e))},flatten:function(t){return At(this,xt(this,t,!0))},fromEntrySeq:function(){return new lt(this)},get:function(t,e){return this.find(function(e,n){return X(n,t)},void 0,e)},getIn:function(t,e){for(var n,r=this,i=Mt(t);!(n=i.next()).done;){var o=n.value;if(r=r&&r.get?r.get(o,fn):fn,r===fn)return e}return r},groupBy:function(t,e){return gt(this,t,e)},has:function(t){return this.get(t,fn)!==fn},hasIn:function(t){return this.getIn(t,fn)!==fn},isSubset:function(t){return t="function"==typeof t.includes?t:f(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t.isSubset(this)},keySeq:function(){return this.toSeq().map(Qe).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(t){return Et(this,t)},maxBy:function(t,e){return Et(this,e,t)},min:function(t){return Et(this,t?Ze(t):nn)},minBy:function(t,e){return Et(this,e?Ze(e):nn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return At(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return At(this,wt(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Ge(t),e)},sortBy:function(t,e){return At(this,kt(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return At(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return At(this,_t(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Ge(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=rn(this))}});var sr=f.prototype;sr[yn]=!0,sr[In]=sr.values,sr.__toJS=sr.toArray,sr.__toStringMapper=tn,sr.inspect=sr.toSource=function(){return this.toString()},sr.chain=sr.flatMap,function(){try{Object.defineProperty(sr,"length",{get:function(){if(!f.noLengthWarning){var t;try{throw new Error}catch(e){t=e.stack}if(-1===t.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+t),this.size}}})}catch(t){}}(),Xe(p,{flip:function(){return At(this,ft(this))},findKey:function(t,e){var n=this.findEntry(t,e);
return n&&n[0]},findLastKey:function(t,e){return this.toSeq().reverse().findKey(t,e)},keyOf:function(t){return this.findKey(function(e){return X(e,t)})},lastKeyOf:function(t){return this.findLastKey(function(e){return X(e,t)})},mapEntries:function(t,e){var n=this,r=0;return At(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return At(this,this.toSeq().flip().map(function(r,i){return t.call(e,r,i,n)}).flip())}});var ar=p.prototype;ar[vn]=!0,ar[In]=sr.entries,ar.__toJS=sr.toObject,ar.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+tn(t)},Xe(d,{toKeyedSeq:function(){return new ut(this,!1)},filter:function(t,e){return At(this,yt(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.toKeyedSeq().keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){return this.toSeq().reverse().indexOf(t)},reverse:function(){return At(this,dt(this,!1))},slice:function(t,e){return At(this,mt(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=c(t,this.size);var r=this.slice(0,t);return At(this,1===n?r:r.concat(i(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.toKeyedSeq().findLastKey(t,e);return void 0===n?-1:n},first:function(){return this.get(0)},flatten:function(t){return At(this,xt(this,t,!1))},get:function(t,e){return t=s(this,t),0>t||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return t=s(this,t),t>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return At(this,It(this,t))},interleave:function(){var t=[this].concat(i(arguments)),e=Ot(this.toSeq(),P.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),At(this,n)},last:function(){return this.get(-1)},skipWhile:function(t,e){return At(this,wt(this,t,e,!1))},zip:function(){var t=[this].concat(i(arguments));return At(this,Ot(this,en,t))},zipWith:function(t){var e=i(arguments);return e[0]=this,At(this,Ot(this,t,e))}}),d.prototype[gn]=!0,d.prototype[mn]=!0,Xe(y,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),y.prototype.has=sr.includes,Xe(D,p.prototype),Xe(P,d.prototype),Xe(T,y.prototype),Xe(H,p.prototype),Xe(K,d.prototype),Xe(J,y.prototype);var ur={Iterable:f,Seq:A,Collection:W,Map:Rt,OrderedMap:Se,List:he,Stack:Oe,Set:Te,OrderedSet:Re,Record:Fe,Range:Ke,Repeat:Je,is:X,fromJS:Q};return ur})},function(t,e){"use strict";function n(t){return{_getResourceUrl:function(t){return""+this.basePath+"/"+this.endpoint},_getObjectUrl:function(t){return""+this.basePath+"/"+this.endpoint+"/"+t}}}t.exports=n},function(t,e){"use strict";function n(t){var e=t.fkAttr;return{_getResourceUrl:function(t){return""+this.basePath+"/"+t[e]+"/"+this.endpoint},_getObjectUrl:function(t){return""+this.basePath+"/"+this.endpoint+"/"+t}}}t.exports=n},function(t,e,n){"use strict";var r=n(2),i=n(5),o=n(28),s=n(29),a=n(3),u=r.createClass({displayName:"DependentDatasource",propTypes:{config:r.PropTypes.shape({name:r.PropTypes.string,basePath:r.PropTypes.string,endpoint:r.PropTypes.string,storeType:r.PropTypes.string.isRequired,idAttr:r.PropTypes.string,fkAttr:r.PropTypes.string}),data:r.PropTypes.object,tag:r.PropTypes.string,scoped:r.PropTypes.bool},getDefaultProps:function(){return{config:{idAttr:"id",fkAttr:"parent_id",storeType:"unique"}}},mixins:[i.ListenerMixin,o,s],_updateDynamicView:function(t){if(t.tag){var e=t.data,n=t.config,r=n.idAttr,i=n.fkAttr;if(e&&e[r]){var o={};o[i]=e[r],this.dataSource.listenables.filter(t.tag,o)}}},_reloadCollection:function(t){var e=this.dataSource.getCollection(t.tag);this.setState({data:e})},_repopulate:function(t){if(t.data){var e=t.config,n=e.idAttr,r=e.fkAttr,i=(e.idRootAttr,e.fkRootAttr,{});i[r]=t.data[n],i.rootId=t.rootId,i[r]&&this.dataSource.listenables.populate(i)}},componentWillReceiveProps:function(t){var e=t.config,n=e.idAttr;e.fkAttr;t.config.name!==this.props.config.name?(this.stopListeningToAll(),this._prepareDatasource(t)):t.config.endpoint!==this.props.config.endpoint&&this._prepareDatasource(t),t.data&&t.data[n]!==this.props.data[n]&&(this._updateDynamicView(t),this._repopulate(t))},componentDidMount:function(){var t=a.extend({},this.props.config);t.dependent=!0,t.rootId=this.props.rootId,this._prepareDatasource(t),this._updateDynamicView(this.props),this._repopulate(this.props)}});t.exports=u},function(t,e,n){"use strict";function r(t){var e=void 0===arguments[1]?{}:arguments[1],n=Object.keys(e);return Object.keys(e)?u.reduce(n,function(t,n,r){var i=void 0,o=e[n],s=0===r?"?":"&";return i=""+s+n+"="+o,""+t+i},t):t}function i(t,e){var n=a.defer();if(!t)return console.warn("No url specified.");var i=r(t,e);return c({url:i,method:"get",error:function(t){return n.reject(t)},success:function(t){return n.resolve(t)}}),n.promise}function o(t,e){return u.chain(t||[]).concat(e).uniq(!1,function(t){return t.id}).value()}var s=n(2),a=n(38),u=n(3),c=n(39),h=s.createClass({displayName:"BasicDatasource",propTypes:{url:s.PropTypes.string,autoPopulate:s.PropTypes.bool,queryParams:s.PropTypes.object,children:s.PropTypes.array,serializer:s.PropTypes.func,wrapper:s.PropTypes.string,className:s.PropTypes.string,onData:s.PropTypes.func},getDefaultProps:function(){return{autoPopulate:!0,queryParams:{},serializer:function(t){return t},wrapper:"div",className:""}},getInitialState:function(){return{data:null}},componentWillMount:function(){this.props.autoPopulate&&this.populate(this.props),this.limitedPopulate=u.throttle(this.populate,750)},componentWillReceiveProps:function(t){var e=this;u.isEqual(t.queryParams,this.props.queryParams)||this.limitedPopulate(t),t.url!=this.props.url&&this.setState({data:[]},function(){e.populate(t)})},render:function(){var t=this.props.className,e=this.props.wrapper,n=this.cloneWithProps(this.state);return s.createElement(e,{className:t},n)},cloneWithProps:function(t){var e=s.Children.map(this.props.children,function(e){return e?s.cloneElement(e,t):null},this.context);return e},populate:function(){var t=this,e=void 0===arguments[0]?this.props:arguments[0],n=e.url,r=e.queryParams,s=e.serializer;return n?void i(n,r).then(function(e){var n=t.props.onData,r=o(t.state.data,s(e));t.setState({data:r},function(){n&&n(r)})}).fail(function(t){console.error("BasicDatasource failed!",n,t)}):!1}});t.exports=h},function(t,e,n){"use strict";var r=n(2),i=n(5),o=n(28),s=n(29),a=n(3),u=r.createClass({displayName:"FilteredDatasource",propTypes:{config:r.PropTypes.shape({name:r.PropTypes.string,basePath:r.PropTypes.string,endpoint:r.PropTypes.string,storeType:r.PropTypes.string.isRequired,idAttr:r.PropTypes.string,autoPopulate:r.PropTypes.bool}),sortBy:r.PropTypes.shape({attribute:r.PropTypes.string,isDescending:r.PropTypes["boolean"]}),filters:r.PropTypes.object,data:r.PropTypes.object,tag:r.PropTypes.string.isRequired,params:r.PropTypes.object},getDefaultProps:function(){return{autoPopulate:!0,config:{idAttr:"id",storeType:"unique"}}},mixins:[i.ListenerMixin,o,s],_registerView:function(t,e){var n=t.tag,r=t.sortBy,i=t.filters,o=t.search,s=t.data,u=t.config,c=u.idAttr,h=u.fkAttr,l=e.dataSource,f={};return s&&(f[h]=s[c]||t.objectId||-1),i=a.extend(f,i),l.listenables.registerView(n,{sortBy:r,filters:i,search:o})},_reloadCollection:function(t,e){var n=e.dataSource,r=this.props.onData,i=n.getCollection(t.tag),o=a.clone(n.getLoadingStatus()),s=o.loading,u=o.firstLoadComplete;r&&r(i,n.listenables),this.setState({data:a.clone(i),loading:s,firstLoadComplete:u})},_repopulate:function(t,e){var n=(t.autoPopulate,t.params),r=e.dataSource,i=t.config,o=i.idAttr,s=i.fkAttr,a={};t.autoPopulate&&(t.rootId&&(a.rootId=t.rootId),t.loadId&&(a.loadId=t.loadId),t.data&&(a[s]=t.data[o]),t.objectId&&(a[s]=t.objectId),r.listenables.populate(a,n))},didViewChange:function(t){return!a.isEqual(t.filters,this.props.filters)||!a.isEqual(t.search,this.props.search)},didConfigChange:function(t){return t.config.name!==this.props.config.name||t.config.endpoint!==this.props.config.endpoint},didWatchedPropsChange:function(t,e){var n=this;return e&&a.every(e,function(e){return n.props.data[e]!==t.data[e]?!0:void 0})},didIdChange:function(t){var e=t.config.idAttr,n=this.props.data&&this.props.data[e]||this.props.objectId,r=t.data&&t.data[e]||t.objectId,i=r!==n;return i=i||t.loadId!==this.props.loadId},didParamsChange:function(t){return a.isEqual(t.params,this.props.params)?!1:!0},componentWillReceiveProps:function(t){var e=this,n=t.config,r=(n.idAttr,n.fkAttr,n.watchProps),i=this.didViewChange(t),o=this.didConfigChange(t),s=(this.didWatchedPropsChange(t,r),this.didIdChange(t)),a=this.didParamsChange(t);o&&this._prepareDatasource(t.config),this.state.dataSource&&(i||s)&&(this.state.dataSource.listenables.resetView(t.tag,!1),this.setState({loading:!0},function(){e._registerView(t,e.state)})),this.state.dataSource&&(s||a)&&this._repopulate(t,this.state)},componentWillUpdate:function(t,e){this.state.dataSource!=e.dataSource&&this._registerView(t,e)},shouldComponentUpdate:function(t,e){return a.isEqual(e,this.state)&&a.isEqual(t,this.props)?!1:!0},componentDidMount:function(){var t=a.extend({},this.props.config),e=this.props.data;e&&e[t.idAttr]&&(t.dependent=!0,t.rootId=this.props.rootId),this._prepareDatasource(t)}});t.exports=u},function(t,e,n){"use strict";var r=n(2),i=r.createClass({displayName:"ObjectTest",propTypes:{data:r.PropTypes.object},getDefaultProps:function(){return{data:{}}},render:function(){var t=this;return r.createElement("table",{className:"edit"},this.props.data&&Object.keys(this.props.data).map(function(e){var n=JSON.stringify(t.props.data[e]);return r.createElement("tr",{key:e},r.createElement("th",null,e),r.createElement("td",null,n))}))}});t.exports=i}])});